<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Playing 4K Ultra HD Videos on Fire TV | Fire TV</title>
    
    <base target="_self">
    <meta name="description" content="You can play 4K Ultra HD (UHD) media on Amazon Fire TV (2nd Generation) devices – but not on Fire TV (1st Generation) or Fire TV Stick. To support 4K... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">
<!--
    Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at http://aws.amazon.com/apache2.0/ or in the "license" file accompanying this file. This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. This site also includes third-party software subject to various copyrights. The licenses for these third party components are referenced in the NOTICE file.
-->

    <!-- FontAwesome -->
   <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!-- Navgoco -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Anchor JS -->
    
        <script src="assets/js/anchor.min.js"></script>
    

    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--Bootstrap -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "Table of Contents"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="fa fa-bars fa-2x"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="https://developer.amazon.com/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="index.html">Documentation Home</a></li>
                    
                    
                    <li><a href="https://github.com/amzn/appstore-alexa-docs/issues" class="noCrossRef">Log Doc Issue</a></li>
                    <li><a target="_blank" href="https://github.com/amzn/appstore-alexa-docs/blob/github-docs/_docs/firetv/getting_started/Development Best Practices/fire-tv-4k-ultra-hd.md" class="editButton noCrossRef"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a></li>
                    
                    <li><a href="https://forums.developer.amazon.com/spaces/43/index.html" class="editButton noCrossRef">Fire TV Forum</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    


                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="Global Search ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>


        <!-- /.container -->
    </nav>



<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar - uses Lunr.js  -->

<div class="sidebarSearchBar">
<form action="search-firetv.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="Product Search ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fire TV</div>
<p class="external">
    <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Overview</a>
        <ul>
            

            
            
            <li class="level1items"><a href="getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Get Started Developing Apps and Games for Fire TV</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="device-and-platform-specifications.html">Fire TV Device Specifications</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-development-framework-comparison.html">Fire TV Development Frameworks: WASK and FireBuilder</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fire-tv-differences-from-android-tv-development.html">How Fire TV Development Differs from Android TV Development</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="design-and-user-experience-guidelines.html">TV App Design UX Guidelines</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-fire-os-overview.html">What Is Fire OS?</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="whats-new-in-the-fire-tv-sdk.html">What's New in Fire TV Development</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fire-tv-sdk-frequently-asked-questions.html">Fire TV FAQs</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="submitting-your-fire-tv-app-to-the-amazon-appstore.html">Submitting Your Fire TV App to the Appstore</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Set Up Your Development Environment</a>
        <ul>
            

            
            
            <li class="level1items"><a href="setting-up-your-development-environment.html">Set Up Your Development Environment</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="connecting-adb-to-fire-tv-device.html">Connect to Fire TV through ADB</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="installing-and-running-your-app.html">Install and Run Your Fire TV App</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Controllers in Android Apps</a>
        <ul>
            

            
            
            <li class="level1items"><a href="supporting-controllers-on-amazon-fire-tv.html">Controllers Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fire-tv-remote-input.html">Remote Input</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fire-game-controller-input.html">Game Controller Input</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="controller-input-with-unity.html">Controller Input with Unity</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="identifying-controllers.html">Identifying Controllers</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="controller-behavior-guidelines.html">Controller Behavior Guidelines</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="controller-image-assets.html">Controller Image Assets</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Development Best Practices</a>
        <ul>
            

            
            
            <li class="level1items"><a href="customizing-mouse-pointer.html">Mouse Pointers</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="display-and-layout.html">Display and Layout</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="user-agent-strings.html">User Agent Strings</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="managing-audio-focus.html">Managing Audio Focus</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-media-players.html">Media Players</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="amazon-fire-tv-dolby-integration-guidelines.html">Dolby Integration</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="identifying-amazon-fire-tv-devices.html">Identifying Fire TV Devices</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-handling-hdmi-events.html">HDMI Events</a></li>
            
            

            

            

            
            
            <li class="level1items open"><a href="fire-tv-4k-ultra-hd.html">4K Ultra HD Videos</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="user-interface.html">Android Menu and ActionBar widgets</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="dial-integration.html">DIAL Integration</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="implementing-search-fire-tv.html">Search</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="notifications-for-amazon-fire-tv.html">Notifications</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="specifying-installation-location.html">App Installation Location</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-advertising-id.html">Advertising ID</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-international-locales.html">Resources for International Locales</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Troubleshooting Fire TV Issues with Developer Tools</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-tv-system-xray-developer-tools.html">Developer Tool Options</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-system-xray.html">System X-Ray</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-system-xray-customized-metrics.html">Customize System X-Ray</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Accessibility</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-tv-assistive-technologies.html">Understanding Assistive Technologies for Fire OS</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-accessibility.html">Implementing Accessibility in Fire OS</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-preview-future-voiceview-accessibility-features.html">PREVIEW: Implementing Future VoiceView Accessibility Features</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">Build Webapps for Fire TV</a>
        <ul>
            

            
            
            <li class="level1items"><a href="getting-started-with-web-apps-for-fire-tv.html">Get Started with Web Apps</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="supporting-controllers-in-web-apps.html">Web App Controllers</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="the-web-app-starter-kit-for-fire-tv.html">Web App Starter Kit</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="customizing-your-fire-tv-web-app.html">Customize your App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="migrating-your-web-app-to-fire-tv.html">Migrate Your App to Fire TV</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-tv-web-app-faq.html">Web App FAQ</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">Related Resources</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/integrating-your-catalog-with-fire-tv.html">Fire TV Catalog Integration</a></li>
        
        <li><a class="noCrossRef" href="/fire-app-builder-overview.html">Fire App Builder</a></li>
        
        <li><a class="noCrossRef" href="https://developer.amazon.com/app-testing-service">App Testing Service</a></li>
        
        <li><a class="noCrossRef" href="/appstore-understanding-submission.html">Appstore Publishing</a></li>
        
        <li><a class="noCrossRef" href="/getting-started-with-iap.html">In-App Purchasing API</a></li>
        
        <li><a class="noCrossRef" href="/understanding-the-amazon-fling-service">Fling SDK</a></li>
        
        <li><a class="noCrossRef" href="">Developer Portal Forums</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">

                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> > <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a> > Fire TV </div>

                    <h1>Playing 4K Ultra HD Videos on Fire TV</h1>

                    <p>You can play 4K Ultra HD (UHD) media on Amazon Fire TV (2nd Generation) devices – but not on Fire TV (1st Generation) or Fire TV Stick. To support 4K playback, you must adhere to the supported output resolutions, DRM systems, and codecs for 4K UHD content.</p>

<ul id="markdown-toc">
  <li><a href="#hdmi-mode-switch" id="markdown-toc-hdmi-mode-switch">HDMI Mode switch</a></li>
  <li><a href="#certification-and-performance-testing" id="markdown-toc-certification-and-performance-testing">Certification and Performance Testing</a></li>
  <li><a href="#4k-ultra-hd-specifications" id="markdown-toc-4k-ultra-hd-specifications">4K Ultra HD Specifications</a>    <ul>
      <li><a href="#resolution-and-refresh-rate" id="markdown-toc-resolution-and-refresh-rate">Resolution and Refresh Rate</a></li>
      <li><a href="#drm-systems" id="markdown-toc-drm-systems">DRM Systems</a></li>
      <li><a href="#codecs" id="markdown-toc-codecs">Codecs</a></li>
      <li><a href="#inputoutput-color-formats" id="markdown-toc-inputoutput-color-formats">Input/Output Color Formats</a></li>
      <li><a href="#power-consumption" id="markdown-toc-power-consumption">Power Consumption</a></li>
    </ul>
  </li>
  <li><a href="#apis-for-hdmi-mode-switch" id="markdown-toc-apis-for-hdmi-mode-switch">APIs for HDMI Mode Switch</a></li>
  <li><a href="#hdmimodeswitch" id="markdown-toc-hdmimodeswitch">Steps for Using HDMI Mode Switch</a></li>
  <li><a href="#interface-for-developers" id="markdown-toc-interface-for-developers">Interface for developers</a></li>
  <li><a href="#amazonextension" id="markdown-toc-amazonextension">Amazon 4K Extension Library</a>    <ul>
      <li><a href="#uhdhelper-class" id="markdown-toc-uhdhelper-class">UHDHelper class</a></li>
      <li><a href="#uhdhelperlistener-class" id="markdown-toc-uhdhelperlistener-class">UhdHelperListener class</a></li>
      <li><a href="#displaymode-class" id="markdown-toc-displaymode-class">Display.Mode class</a></li>
    </ul>
  </li>
  <li><a href="#interstitial" id="markdown-toc-interstitial">Interstitial during Mode Switch</a></li>
</ul>

<h2 id="hdmi-mode-switch">HDMI Mode switch</h2>

<p>By default, Fire TV (2nd Generation) operates at 1080p at 60 FPS mode even when connected to a 4K UHD TV. Hence, in order to play 4K UHD content, you must switch the TV to 4K UHD display mode. This switching between HDMI display modes is referred to as an <em>HDMI Mode switch</em>. The HDMI Mode switch is triggered by the application when it needs to play 4K UHD content.</p>

<p>Amazon developed an <a href="#amazonextension">Amazon Extension Library for 4K</a> that provides high level APIs to trigger this HDMI Mode switch and show a user-friendly overlay message before the TV starts switching the display mode. This overlay message improves the overall customer experience.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Fire TV (2nd Generation) supports only up to 30 FPS for 4K UHD content.</div>

<h2 id="certification-and-performance-testing">Certification and Performance Testing</h2>

<p>Apps that support Ultra HD video will be certified by Amazon to ensure they meet the required customer experience. Typically, certification takes a couple of weeks.</p>

<p>When you submit your app, add a note that it is 4K-enabled. Most likely in your app’s description, you would already highlight to users that your app offers 4K Ultra HD media playback. But adding a manual note will also let Amazon know to apply 4K performance testing on the app during the certification process.</p>

<h2 id="4k-ultra-hd-specifications">4K Ultra HD Specifications</h2>

<h3 id="resolution-and-refresh-rate">Resolution and Refresh Rate</h3>

<p>Amazon Fire TV (2nd Generation) supports the following output resolutions:</p>

<ul>
  <li>4K UHD at 24 FPS</li>
  <li>4K UHD at 25 FPS</li>
  <li>4K UHD at 30 FPS</li>
  <li>Full HD (1080p) up to 60 FPS</li>
</ul>

<p>Amazon Fire TV (2nd Generation) is expected to stay mostly in Full HD (1080p) mode at 60 FPS, even on TVs that support 4K UHD format. Fire TV (2nd Generation) switches to 4K UHD mode only for 4K UHD content playback.</p>

<p>The following frame rates are recommended when playing content:</p>

<ul>
  <li>For Full HD (1080p) and HD (720p) content, leave the device in <strong>Full HD (1080p) 60 FPS mode</strong> and use frame rate conversion from the content’s native frame rate (as in Fire TV - 1st Generation).</li>
  <li>For 4K UHD content, switch to the nearest 4K UHD mode before starting playback. For example, switch to <strong>4K UHD at 24 FPS</strong> to play 4k UHD content of <strong>24 FPS or 23.97 FPS</strong>, switch to <strong>4K UHD at 25 FPS</strong> to play content of <strong>25 FPS</strong>, and switch to <strong>4K UHD at 30 FPS</strong> to play content of <strong>30 FPS or 29.97 FPS</strong>.</li>
  <li>Initiate a mode switch only if the user enters the playback window or if the next title in the queue requires a different playback resolution / frame rate.</li>
</ul>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Fire TV (2nd Generation) switches the display back to Full HD at 60 FPS whenever the activity that switched the display to 4K mode is paused. An activity can be paused in several ways, such as pressing “BACK” button, the “HOME” button, or programmatically launching another activity on top of it.</div>

<h3 id="drm-systems">DRM Systems</h3>

<p>Amazon Fire TV (2nd Generation) supports the following DRM solutions:</p>

<ul>
  <li>Widevine L1/L3 DRM</li>
  <li>PlayReady DRM (2.5 max)</li>
  <li>HDCP 2.2 link to compatible panels</li>
</ul>

<h3 id="codecs">Codecs</h3>

<p>Amazon Fire TV (2nd Generation) supports the following codecs:</p>

<ul>
  <li>MediaCodec that supports HEVC main L5 profile</li>
  <li>MediaCodec that supports HEVC main10 L5 profile (The output will be in 8-bit Rec 709 color space for both 8-bit and 10-bit color input.)</li>
</ul>

<h3 id="inputoutput-color-formats">Input/Output Color Formats</h3>

<p>Amazon Fire TV (2nd Generation) supports the following color specs:</p>

<table class="grid grid">
   <colgroup>
      <col width="40%" />
      <col width="60%" />
   </colgroup>
  <thead>
    <tr>
      <th>Supported Input Color Formats</th>
      <th>Output Color Formats</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>8-bit Rec709 (HEVC Main profile L5)</td>
      <td>8-bit Rec709</td>
    </tr>
    <tr>
      <td>10-bit Rec709 (HEVC Main10 profile L5)</td>
      <td>8-bit Rec709</td>
    </tr>
    <tr>
      <td>10-bit Rec2020 (HEVC Main10 profile L5)</td>
      <td>8-bit Rec709</td>
    </tr>
  </tbody>
</table>

<p>10-bit color input is supported by the codec, but the output does not support 10-bit output.</p>

<h3 id="power-consumption">Power Consumption</h3>

<p>The following table specifies the maximum allowed power consumption for Fire TV devices:</p>

<table class="grid grid">
   <colgroup>
      <col width="25%" />
      <col width="25%" />
      <col width="25%" />
      <col width="25%" />
   </colgroup>
  <thead>
    <tr>
      <th>Fire TV Stick (Gen. 2)</th>
      <th>Fire TV (Gen. 2)</th>
      <th>Fire TV Stick (Gen. 1)</th>
      <th>Fire TV (Gen. 1)</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>2.1 W</td>
      <td>3.8 Watts</td>
      <td>1.7 Watts</td>
      <td>3.6 Watts</td>
    </tr>
  </tbody>
</table>

<p>Run the app 10 minutes before measuring the power consumption on the Fire TV Stick. For Fire TV, run the app for at least 30 minutes before taking the power measurement. Your power measurement can continue for 5 minutes.</p>

<p>If the power consumption from your app exceeds the limits in the previous table, Fire TV will throttle the performance of your app. If throttling is not enough, Fire TV will reset the system.</p>

<p>In your code, you can check for the device (whether Fire TV Stick or Fire TV) by looking for the <code class="highlighter-rouge">amazon.hardware.low_power</code> feature. See <a href="identifying-amazon-fire-tv-devices.html">Identifying Amazon Fire TV Devices</a> for more details.</p>

<h2 id="apis-for-hdmi-mode-switch">APIs for HDMI Mode Switch</h2>

<p>Google introduced 4K <a href="https://developer.android.com/about/versions/marshmallow/android-6.0.html#4K-display"><code class="highlighter-rouge">Display.Mode</code></a> APIs in Android Marshmallow. <code class="highlighter-rouge">Display.Mode</code> allows applications to query physical display sizes and switch to a different HDMI display mode.</p>

<p>Amazon implemented <code class="highlighter-rouge">Display.Mode</code> APIs in Fire TV (2nd Generation) running Fire OS 5 (based on Android L). Apps can use these APIs for the HDMI Mode switch.</p>

<p>Since these APIs are not part of Android API Level 21 (Lollipop) in Android SDK, the apps can use “reflection” to access the APIs.  Alternatively, app developers can use the <a href="#amazonextension">4K Extension Library</a> developed by Amazon, which wraps these Android APIs via reflection and provides a simple interface for them.</p>

<p>You can also display an optional interstitial developed by Amazon to prepare customers for the HDMI Mode switch. This interstitial is distributed as part of the Amazon Extension Library For 4K.</p>

<p>Fire OS will also provide a <code class="highlighter-rouge">sys.display-size</code> system property to report the maximum supported resolution of the connected display.</p>

<h2 id="hdmimodeswitch">Steps for Using HDMI Mode Switch</h2>

<p>Follow these general steps when using the Android API to initiate an HDMI Mode switch:</p>

<ol>
  <li>
    <p><strong>Query supported display modes with <code class="highlighter-rouge">Display.getSupportedModes()</code>.</strong></p>

    <p><code class="highlighter-rouge">Display.getSupportedModes()</code> returns an array of <code class="highlighter-rouge">Display.Mode</code> objects. This synchronous API returns the modes (resolution and frame rate) supported by both Fire TV (2nd Generation) and the attached display. If the attached display supports 4K UHD, then 4K UHD modes will be included in the list.</p>

    <p>Because frame rate conversion may not provide optimal results, Amazon recommends switching to the actual or closest frame rate of the content to be played (4K at 24fps, 4K at 25fps, or 4K at 30fps).</p>
  </li>
  <li>
    <p><strong>Retrieve the current display resolution and frame rate using <code class="highlighter-rouge">Display.getMode()</code>.</strong></p>

    <p><code class="highlighter-rouge">Display.getMode()</code> returns the current display resolution and refresh rate in a <code class="highlighter-rouge">Display.Mode</code> object.</p>
  </li>
  <li>
    <p><strong>Set the Display mode with the <code class="highlighter-rouge">WindowManager.LayoutParams.preferredDisplayModeId</code> property.</strong></p>

    <p>Applications use <code class="highlighter-rouge">WindowManager.LayoutParams.preferredDisplayModeId</code> property to initiate a mode switch. This allows the application to start up in Full HD (1080p) and then initiate a mode switch to 4K UHD when the user starts playback of 4K UHD content. Note the following:</p>

    <ul>
      <li>A mode switch will not be initiated during Activity transitions if both activities prefer the same mode.</li>
      <li>System and voice overlays will not initiate a mode switch.</li>
      <li>The display switches back to Full HD (1080p) resolution when either the application or activity terminates.</li>
      <li>The <code class="highlighter-rouge">Display.Mode</code> class definition aligns with Android Marshmallow.</li>
    </ul>
  </li>
  <li>
    <p><strong>Get notification for when the mode switch negotiation is complete.</strong></p>

    <p>Through the <code class="highlighter-rouge">onDisplayChanged(int displayId)</code> method, you can be notified when the mode switch negotiation is complete.</p>

    <p><code class="highlighter-rouge">DisplayManager.DisplayListener</code> sends a callback when properties of logical display have changed. This callback will be received once the mode change is complete. Note that the displayed content may not be visible for a few seconds after the callback is received.</p>
  </li>
</ol>

<h2 id="interface-for-developers">Interface for developers</h2>

<p>Applications can use these APIs directly via reflection, or they can use an Amazon provided wrapper (the 4K Extension Library) to access these APIs. The following code sample shows the mode change directly without the extension:</p>

<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">WindowManager</span><span class="o">.</span><span class="na">LayoutParams</span> <span class="n">mWindowAttributes</span> <span class="o">=</span> <span class="n">mTargetWindow</span><span class="o">.</span><span class="na">getAttributes</span><span class="o">();</span>
<span class="k">try</span> <span class="o">{</span>
 <span class="k">if</span> <span class="o">(</span><span class="n">attributeFlagField</span> <span class="o">==</span> <span class="kc">null</span><span class="o">)</span> <span class="o">{</span>
  <span class="n">Class</span> <span class="o">&lt;</span> <span class="o">?</span> <span class="o">&gt;</span> <span class="n">cLayoutParams</span> <span class="o">=</span> <span class="n">mWindowAttributes</span><span class="o">.</span><span class="na">getClass</span><span class="o">();</span>
  <span class="n">attributeFlagField</span> <span class="o">=</span> <span class="n">cLayoutParams</span><span class="o">.</span><span class="na">getDeclaredField</span><span class="o">(</span><span class="n">sPreferredDisplayModeIdFieldName</span><span class="o">);</span>
 <span class="o">}</span>
 <span class="c1">//attempt mode switch</span>
 <span class="n">attributeFlagField</span><span class="o">.</span><span class="na">setInt</span><span class="o">(</span><span class="n">mWindowAttributes</span><span class="o">,</span> <span class="n">modeId</span><span class="o">);</span>
 <span class="n">mTargetWindow</span><span class="o">.</span><span class="na">setAttributes</span><span class="o">(</span><span class="n">mWindowAttributes</span><span class="o">);</span>
<span class="o">}</span> <span class="k">catch</span> <span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
 <span class="n">Log</span><span class="o">.</span><span class="na">e</span><span class="o">(</span><span class="n">TAG</span><span class="o">,</span> <span class="n">e</span><span class="o">.</span><span class="na">getLocalizedMessage</span><span class="o">());</span>
<span class="o">}</span>
</code></pre>
</div>

<p>The approach using the 4K Extension Library is covered in the next section.</p>

<h2 id="amazonextension">Amazon 4K Extension Library</h2>

<p>HDMI Mode Switch APIs in Fire TV (2nd Generation) are not available in Android Lollipop SDK. To use them, you must use reflection. Amazon built the 4K Extension Library (provided in the form of source code) to demonstrate how to use the Android APIs and provide a helper class. </p>

<p><a href="https://s3.amazonaws.com/fire-tv-code-samples/4K-SupportLibrary-FireTVGen2-V-1-1.zip"><button class="feedbackButton noCrossRef">Download Amazon 4K Extension</button></a></p>

<p>The extension ZIP file includes a sample app inside the Test folder called “DisplayModeCheckSample.” There’s also a Javadoc file, which you can view by expanding the <strong>doc &gt; javadoc</strong> folder and opening the <strong>index.html</strong> file.</p>

<p>To build the app, go to <strong>File &gt; Open</strong> in Android Studio and select the <strong>DisplayModeCheckSample</strong> project. Then click the <strong>Run ‘app’</strong> button <img class="inline " src="docs/firetv/fireappbuilder/images/fireappbuilder_runappbutton.png" alt="" />
. When you build the app, you will see a screen such as this:</p>

<figure><img class="docimage " src="docs/firetv/getting_started/images/displaymode.png" alt="" /></figure>

<p>When you switch modes, the interstitial appears (on an Ultra HD TV) and the app switches to 4K Ultra HD mode.</p>

<p>Amazon’s 4K Extension Library contains the classes listed in the following sections. In addition, it includes the API for displaying the “Amazon Interstitial” to prepare customers for the HDMI Mode switch on Amazon 4K devices. The following sections describe these classes.</p>

<h3 id="uhdhelper-class">UHDHelper class</h3>

<p><code class="highlighter-rouge">UHDHelpder</code> is a convenience class that wraps the 4K UHD capabilities and Mode Switch APIs. It provides the following public methods:</p>
<style>
.classy {
background-color: white;
font-style: normal;
font-family: "Courier";
color: gray;
font-size: 110%;
}
</style>

<p class="classy">setPreferredDisplayModeId(Window targetWindow, int modeId, boolean allowOverlayDisplay)</p>

<p>This method lets you request a specific display mode (resolution and refresh rate). This method initiates a mode switch on the supported devices if the display is not currently set at the requested mode. <code class="highlighter-rouge">UhdHelperListener</code> is used to notify the application that the mode switch HDMI negotiation is complete.</p>

<table class="grid grid">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>targetWindow</code></td>
      <td>Window to use for setting the display and call parameters.</td>
    </tr>
    <tr>
      <td><code>modeId</code></td>
      <td>The desired mode to switch to. Must be a valid mode supported by the platform.</td>
    </tr>
    <tr>
      <td><code>allowOverlayDisplay</code></td>
      <td>Flag request to allow display overlay on applicable device.</td>
    </tr>
  </tbody>
</table>

<p>Note that mode switch requests might not be successful, and you must verify the mode from <code class="highlighter-rouge">UHDHelperListener#onModeChanged(Display.Mode mode)</code> or call <code class="highlighter-rouge">getMode()</code>. You must wait until the mode switch is complete before starting content playback. Also, the mode switch works only with Fire TV (2nd Generation).”</p>

<p class="classy">getSupportedModes()</p>

<p>Determines all the supported modes on the connected device.</p>

<table class="grid grid">
  <thead>
    <tr>
      <th>Returns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>An array of Mode objects or NULL if an error occurred.</td>
    </tr>
  </tbody>
</table>

<p class="classy">getMode()</p>

<p>Returns the current mode that the display is set to. This method is also used to determine the success of a mode switch. When a mode switch is in progress, the result of <code class="highlighter-rouge">getMode()</code> is undefined.</p>

<table class="grid grid">
  <thead>
    <tr>
      <th>Returns</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Mode that is currently set on the system or NULL if an error occurred.</td>
    </tr>
  </tbody>
</table>

<h3 id="uhdhelperlistener-class">UhdHelperListener class</h3>

<p>The <code class="highlighter-rouge">UhdHelperListener</code> class provides the <code class="highlighter-rouge">onModeChanged(Display.Mode mode)</code> method. This method is used to inform applications when the mode switch HDMI negotiation is complete. It also provides the current mode (which could be the requested mode) if the mode change was successful.</p>

<table class="grid grid">
  <thead>
    <tr>
      <th>Parameters</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>mode</code></td>
      <td>The Mode object containing the mode switched to, or NULL if there was a timeout or internal error while changing the mode.</td>
    </tr>
  </tbody>
</table>

<h3 id="displaymode-class">Display.Mode class</h3>

<p>The <code class="highlighter-rouge">Display.Mode</code> class mirrors the <a href="https://developer.android.com/reference/android/view/Display.Mode.html"><code class="highlighter-rouge">Display.Mode</code></a> class in Android Marshmallow. This is used to describe a display mode’s resolution and refresh rate.</p>

<h2 id="interstitial">Interstitial during Mode Switch</h2>

<p>Because the customer experience is interrupted during an HDMI Mode switch, Amazon has built an interstitial that can be optionally
displayed to prepare customers before the HDMI Mode switch. The code to trigger this interstitial is available with the Amazon Extension Library For 4K.</p>

<p>To display the interstitial through the extension code, call <code class="highlighter-rouge">setPreferredDisplayModeId(Window_targetWindow, int_modeId boolean_allowOverlayDisplay)</code> with <code class="highlighter-rouge">allowOverlayDisplay</code> set to <code class="highlighter-rouge">true</code>. The overlay will be shown for two seconds prior to the start of the mode switch.</p>




            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, skills, and more. </p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a class="noCrossRef" href="https://developer.amazon.com/"> Developer Portal</a></li>
                    <li><a class="noCrossRef" href="/index.html">Documentation Home</a></li>
                    <li class="noCrossRef"><a href="https://developer.amazon.com/support"> Support</a></li>
                    <li class="noCrossRef"><a href="https://aws.amazon.com/documentation/"> AWS docs</a></li>
                    <li class="noCrossRef"><a href="https://www.amazon.com/mobile-apps/b?ie=UTF8&node=2350149011"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://developer.amazon.com/blogs"> Blog</a></li>
                    <li class="noCrossRef"><a href="https://www.youtube.com/channel/UCT9ApARFgQJOeqD-ygmxnJQ"> YouTube</a></li>
                    <li class="noCrossRef"><a href="https://twitter.com/AmazonAppDev"> Twitter</a></li>
                    <li class="noCrossRef"><a href="http://phx.corporate-ir.net/phoenix.zhtml?p=irol-mediahome&c=176060"> Amazon Press Room</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/23/index.html"> Alexa Skills Kit</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/33/index.html"> Smart Home Skill API</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/38/index.html"> Alexa Voice Service</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/167/index.html"> Appstore</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/12/index.html"> Underground</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/166/index.html"> Fire Devices</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/61/index.html"> Dash</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-12">
            <p>© 1996-2017, Amazon.com, Inc. or its affiliates</p>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->



</body>

</html>
