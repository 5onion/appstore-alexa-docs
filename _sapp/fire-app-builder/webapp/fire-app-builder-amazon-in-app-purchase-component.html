<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Amazon In-App Purchasing Component | Fire App Builder</title>
    
    <base target="_self">
    <meta name="description" content="The Amazon In-App Purchasing Component uses Amazon’s In-App Purchasing (IAP) API to integrate two different purchasing options in your app:  Daily Pass: Allows uses to watch any media... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">
<!--
    Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at http://aws.amazon.com/apache2.0/ or in the "license" file accompanying this file. This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. This site also includes third-party software subject to various copyrights. The licenses for these third party components are referenced in the NOTICE file.
-->

    <!-- FontAwesome -->
   <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!-- Navgoco -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- Anchor JS -->
    
        <script src="assets/js/anchor.min.js"></script>
    

    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--Bootstrap -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "Table of Contents"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="fa fa-bars fa-2x"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="https://developer.amazon.com/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="index.html">Documentation Home</a></li>
                    
                    
                    <li><a href="https://github.com/amzn/appstore-alexa-docs/issues" class="noCrossRef">Log Doc Issue</a></li>
                    <li><a target="_blank" href="https://github.com/amzn/appstore-alexa-docs/blob/github-docs/_docs/firetv/fireappbuilder/4. Add Components/Purchasing Components/fire-app-builder-amazon-in-app-purchase-component.md" class="editButton noCrossRef"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a></li>
                    
                    <li><a href="https://forums.developer.amazon.com/spaces/43/index.html" class="editButton noCrossRef">Fire TV Forum</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    


                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="Global Search ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>


        <!-- /.container -->
    </nav>



<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar - uses Lunr.js  -->

<div class="sidebarSearchBar">
<form action="search-fireappbuilder.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="Product Search ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fire App Builder</div>
<p class="external">
    <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Introduction</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-overview.html">Fire App Builder Introduction</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-release-notes.html">Release Notes</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-end-to-end-process.html">Beginning-to-End Process Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-questions-and-answers.html">Miscellaneous Questions</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">1. Get Set Up</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-download-and-build.html">Download Fire App Builder and Build an App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-connecting-adb-to-fire-tv.html">Connect to Fire TV Through ADB</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-app-tour.html">Take an App Tour</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">2. Configure Your Feed</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-load-media-feed.html">Load Your Media Feed</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-overview.html">Recipe Configuration Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-categories.html">Set Up the Categories Recipe</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-content.html">Set Up the Contents Recipe</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator.html">Navigator Configuration Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-token-feeds.html">Configure Navigator -- Token-based Feeds</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-open-feeds.html">Configure Navigator -- Open Feeds</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">3. Customize the Appearance</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-customize-look-and-feel.html">Customize the Look and Feel</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">4. Add Components</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-interfaces-and-components.html">Components Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-load-a-component.html">Load a Component</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-create-a-new-component.html">Create Your Own Fire App Builder Component</a></li>
            
            

            

            <li class="level2"><a class="subfoldersTitle" href="#">Ads Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-freewheel-ads-component.html">FreeWheel Ads Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-vast-ads-component.html">VAST Ads Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Analytics Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-crashlytics-component.html">Crashlytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-flurry-analytics-component.html">Flurry Analytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-google-analytics-component.html">Google Analytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-omniture-analytics-component.html">Omniture Analytics Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Authorization components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-adobe-pass-auth-component.html">Adobe Pass Authorization Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-facebook-auth-component.html">Facebook Authorization Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-login-with-amazon-component.html">Login with Amazon Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Purchasing Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items open"><a href="fire-app-builder-amazon-in-app-purchase-component.html">Amazon In-App Purchasing Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Media Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-media-player-component.html">Amazon Media Player Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-brightcove-media-player-component.html">BrightCove Player Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            
        </ul>

        
    <li class="level1"><a href="#">Other Development Topics</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-pulling-updates-from-github.html">Pull Updates from Github</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-live-stream-configuration.html">Configure Live Streams</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-catalog-integration.html">Integrate Your Media into the Fire TV Catalog</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-use-an-android-tv-emulator.html">Use an Android TV Emulator to Run Your App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-json.html">Querying JSON</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-xml.html">Querying XML</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-troubleshooting.html">Troubleshooting</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">Related Resources</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Fire TV</a></li>
        
        <li><a class="noCrossRef" href="/integrating-your-catalog-with-fire-tv.html">Fire TV Catalog Integration</a></li>
        
        <li><a class="noCrossRef" href="https://developer.amazon.com/app-testing-service">App Testing Service</a></li>
        
        <li><a class="noCrossRef" href="/appstore-understanding-submission.html">Appstore Publishing</a></li>
        
        <li><a class="noCrossRef" href="/getting-started-with-iap.html">In-App Purchasing API</a></li>
        
        <li><a class="noCrossRef" href="/understanding-the-amazon-fling-service">Fling SDK</a></li>
        
        <li><a class="noCrossRef" href="">Developer Portal Forums</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">

                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> > <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a> > Fire App Builder </div>

                    <h1>Amazon In-App Purchasing Component</h1>

                    <p>The Amazon In-App Purchasing Component uses Amazon’s <a href="https://developer.amazon.com/public/apis/earn/in-app-purchasing">In-App Purchasing</a> (IAP) API to integrate two different purchasing options in your app:</p>

<ul>
  <li><strong>Daily Pass</strong>: Allows uses to watch any media in your app for a day (starting from the time of purchase for 24 hours). This is similar to an unlimited movie rental for 24 hours.</li>
  <li><strong>Go Premium</strong>: Allows users to pay a subscription fee to watch any media in your app during the subscription time period. You define the subscription time period when you set up the in-app items in the Amazon Developer Console.</li>
</ul>

<p>With the In-App Purchasing Component, you don’t have to worry about handling transactions with users. Users make purchases through their Amazon account, which they set up when they configure their Fire TV. The In-App Purchasing API takes care of all of the transaction details within your app.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> You can customize the button text that says “Daily Pass” or “Go Premium.” More details about how to customize the UI strings are provided in <a href="#buttontext">“Customize the Button Text.”</a></div>

<ul id="markdown-toc">
  <li><a href="#the-user-experience-with-amazon-in-app-purchasing-component" id="markdown-toc-the-user-experience-with-amazon-in-app-purchasing-component">The User Experience with Amazon In-App Purchasing Component</a></li>
  <li><a href="#notes-and-limitations-with-in-app-purchasing" id="markdown-toc-notes-and-limitations-with-in-app-purchasing">Notes and Limitations with In-App Purchasing</a></li>
  <li><a href="#amazon-in-app-purchasing-component-workflow" id="markdown-toc-amazon-in-app-purchasing-component-workflow">Amazon In-App Purchasing Component Workflow</a></li>
  <li><a href="#configuration-overview" id="markdown-toc-configuration-overview">Configuration Overview</a>    <ul>
      <li><a href="#daily-pass-consumables-and-go-premium-subscriptions" id="markdown-toc-daily-pass-consumables-and-go-premium-subscriptions">Daily Pass (Consumables) and Go Premium (Subscriptions)</a></li>
      <li><a href="#amazon-in-app-purchasing-component-configuration" id="markdown-toc-amazon-in-app-purchasing-component-configuration">Amazon In-App Purchasing Component Configuration</a></li>
    </ul>
  </li>
  <li><a href="#createapp" id="markdown-toc-createapp">Step 1. Create an App in the Developer Portal</a></li>
  <li><a href="#creategopassitem" id="markdown-toc-creategopassitem">Step 2. Create a Consumable (Daily Pass) In-App Item</a></li>
  <li><a href="#creategopremiumitem" id="markdown-toc-creategopremiumitem">Step 3. Create a Subscription (Go Premium) In-App Item</a></li>
  <li><a href="#downloadjson" id="markdown-toc-downloadjson">Step 4. Download and Push the JSON Data File</a></li>
  <li><a href="#enableiap" id="markdown-toc-enableiap">Step 5. Enable the In-App Purchasing Component in your App</a></li>
  <li><a href="#mapinappitems" id="markdown-toc-mapinappitems">Step 6. Map In-App Items to Content in Your App</a></li>
  <li><a href="#buttontext" id="markdown-toc-buttontext">Step 7. Customize the Button Text</a></li>
  <li><a href="#apptester" id="markdown-toc-apptester">Step 8. Set Up the App Tester</a>    <ul>
      <li><a href="#simulate-calls" id="markdown-toc-simulate-calls">Simulate Calls</a></li>
      <li><a href="#adjust-in-app-items" id="markdown-toc-adjust-in-app-items">Adjust In-App Items</a></li>
      <li><a href="#reset-purchases" id="markdown-toc-reset-purchases">Reset Purchases</a></li>
    </ul>
  </li>
  <li><a href="#additionalsecurity" id="markdown-toc-additionalsecurity">Implementing Additional Security Through the Receipt Verification Service</a></li>
  <li><a href="#submitting-in-app-items-to-production" id="markdown-toc-submitting-in-app-items-to-production">Submitting In-App Items to Production</a></li>
</ul>

<h2 id="the-user-experience-with-amazon-in-app-purchasing-component">The User Experience with Amazon In-App Purchasing Component</h2>

<p>After you implement the Amazon In-App Purchase Component in your app, users see a “Daily Pass” and “Go Premium” button on the Content Details screen (instead of a Watch Now button).</p>

<figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iapprompt.png" alt="" /><figcaption><b>Figure 1.</b> Options to either subscribe or purchase a daily pass appear to the user on the Content Details screen.</figcaption></figure>

<p>When a user clicks the “Go Premium” or “Daily Pass” button, the user is prompted to make a purchase using his or her Fire TV account. For example, if the user clicks “Go Premium,” the following screen appears:</p>

<figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iapsubscriptionoptions.png" alt="" /><figcaption><b>Figure 2.</b> Subscription options dialog box that appears to users.</figcaption></figure>

<p>If a user clicks “Daily Pass,” the following screen appears:</p>

<figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iaprentaloptions.png" alt="" /><figcaption><b>Figure 3.</b> Rental options dialog box that appears to users.</figcaption></figure>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> When you configure the in-app purchasing items, you can customize the text that displays in these dialog boxes.</div>

<p>The user completes the transaction through this Fire TV dialog box using his or her Amazon account, which the user entered when setting up Fire TV. When the transaction is finished, the user sees this screen:</p>

<figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iappromptcomplete.png" alt="" /><figcaption><b>Figure 4.</b> The order is completed.</figcaption></figure>

<p>The user can now start watching the content.</p>

<h2 id="notes-and-limitations-with-in-app-purchasing">Notes and Limitations with In-App Purchasing</h2>

<p>Note the following details with the Amazon In-App Purchase component:</p>

<ul>
  <li>You must offer both Daily Pass (24-hour access) and Go Premium (subscription) options for your media.</li>
  <li>When users purchase Daily Pass or Go Premium, they get access to <em>all</em> the media in your app. You can’t individually separate out some items for subscription or rental while keeping other items free.</li>
  <li>If users are in the middle of a movie when their Daily Pass or Subscription expires, the users will be able to finish their movie. The In-App Purchasing component won’t stop their movie.</li>
  <li>You cannot offer multiple subscription types for the same media. For example, you can’t offer both an SD or HD option to watch content, nor can you offer monthly or yearly subscriptions.</li>
  <li>Daily Pass can be used only on the device in which the purchase was made. A user cannot log into another Fire TV device and expect the Daily Pass to work.</li>
  <li>Go Premium subscriptions work across devices (meaning a user can buy a subscription in one Fire TV device and get the same benefits on another Fire TV device). However, users who log into another device will need to restart the app before the subscription takes effect.</li>
  <li>If a user purchases a Daily Pass, but then the Fire TV app crashes and the data is lost, the user will no longer have access to Daily Pass on the app. However, with Go Premium (subscriptions), app crashes will not void the user’s access after he or she restarts the app.</li>
  <li>If a user subscribes to content and then clicks the Back button, he or she will see the Go Premium button again. But if the user tries to subscribe a second time, the app will recognize that the user is already a subscriber and will provide access to the media.</li>
</ul>

<h2 id="amazon-in-app-purchasing-component-workflow">Amazon In-App Purchasing Component Workflow</h2>

<p>The following steps describe the payment workflow for the Amazon In-App Purchasing Component:</p>

<ol>
  <li>When the app starts, the app uses the In-App Purchasing API to fetch the existing purchases for the current logged-in user and updates the products with the latest receipts.</li>
  <li>On a Content Details screen, the user clicks either a Daily Pass or Go Premium button (assuming the user hasn’t yet purchased the media).</li>
  <li>The app makes a call to the In-App Purchasing API to perform the transaction with the user for the items. The user completes the purchase through the Fire TV account options the user has already set up.</li>
  <li>If the transaction is successful, the In-App Purchasing API returns a receipt ID from the transaction to the app.</li>
  <li>(Optional) To ensure the receipt is valid, you can set up your own service to send a request to the Receipt Verification service and check if the receipt ID is valid.</li>
  <li>If the receipt ID is valid, the app lets the user view the media.</li>
</ol>

<h2 id="configuration-overview">Configuration Overview</h2>

<p>To set up the In-App Purchasing Component, you create a Daily Pass item (consumable) and Go Premium item (subscription) in the In-App Items section of the Developer Portal. You configure your app with the SKU information for these items. The component sends the necessary information to the In-App Purchasing API.</p>

<p>The Amazon In-App Purchasing Component uses a wrapper over the IAP API. Only a limited feature set from IAP is available; as such, the documentation here is a modified subset of the <a href="https://developer.amazon.com/public/apis/earn/in-app-purchasing">IAP documentation</a>.</p>

<h3 id="daily-pass-consumables-and-go-premium-subscriptions">Daily Pass (Consumables) and Go Premium (Subscriptions)</h3>

<p>In-App Purchasing offers 3 types of items: consumables, entitlements, and subscriptions. Only consumables and subscriptions are relevant to the In-App Purchasing Component in Fire App Builder (this component is a wrapper on top of the IAP API, so not all of the IAP API features apply). Both consumable and subscription items (not entitlements) map to the Amazon In-App Purchase Component.</p>

<p>Here’s the difference between consumables and subscriptions:</p>

<ul>
  <li><strong>Consumables</strong> (mapped to <strong>Daily Pass</strong>) are consumed within the app and can be purchased multiple times. Consumables are mapped to “Daily Pass” in Fire App Builder. Choose this type of item if you want users to have access to all your media for a 24-hour access period.</li>
  <li><strong>Subscriptions</strong> (mapped to <strong>Go Premium</strong>) offer access to a premium set of content or features for a limited period of time. Subscriptions are mapped to “Go Premium” in Fire App Builder. Choose this type of item if you want users to have access to all your media throughout the subscription period.</li>
</ul>

<h3 id="amazon-in-app-purchasing-component-configuration">Amazon In-App Purchasing Component Configuration</h3>

<p>To configure the In-App Purchase Component, follow these steps:</p>

<ul>
  <li><a href="#createapp">Step 1. Create an App in the Developer Portal</a></li>
  <li><a href="#creategopassitem">Step 2. Create a Consumable (Daily Pass) In-App Item</a></li>
  <li><a href="#creategopremiumitem">Step 3. Create a Subscription (Go Premium) In-App Item</a></li>
  <li><a href="#downloadjson">Step 4. Download and Push the JSON Data File</a></li>
  <li><a href="#enableiap">Step 5. Enable the In-App Purchasing Component in your App</a></li>
  <li><a href="#mapinappitems">Step 6. Map In-App Items to Content in Your App</a></li>
  <li><a href="#buttontext">Step 7. Customize the Button Text</a></li>
  <li><a href="#apptester">Step 8. Set Up the App Tester</a></li>
</ul>

<h2 id="createapp">Step 1. Create an App in the Developer Portal</h2>

<p>If you have already created an app, you can skip this section jump to the <a href="#creategopassitem">next</a>.</p>

<ol>
  <li>Log in to the Developer Portal.</li>
  <li>Click <strong>Add a New App</strong> and select <strong>Android</strong> in the “Choose a Platform” dialog box. Then click <strong>Next</strong>.</li>
  <li>
    <p>Complete the basic fields for your app:</p>

    <ul>
      <li><strong>App title</strong>: The name of your app.</li>
      <li><strong>App SKU</strong>: A unique identifier for your app (for example, <code class="highlighter-rouge">mycalypsomediapp1234</code>). The SKU has a max length of 150 characters and can contain the characters a-z, A-Z, 0-9, underscores, periods, and dashes. SKUs are case-sensitive.</li>
      <li><strong>Category</strong>: Choose a category appropriate for your app and media.</li>
    </ul>
  </li>
  <li>For <strong>Customer Support Contact</strong>, select <strong>Use my default support information</strong> or customize the fields. Then click <strong>Save</strong>.</li>
</ol>

<h2 id="creategopassitem">Step 2. Create a Consumable (Daily Pass) In-App Item</h2>

<ol>
  <li>Log in to the Developer Portal, go to the <strong>Dashboard</strong>, and click your app.</li>
  <li>Click the <strong>In-App Items</strong> tab in your app.</li>
  <li>
    <p>Click the <strong>Add a Consumable</strong> button (for Daily Pass).</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iaprentaloptions.png" alt="" /><figcaption><b>Figure 5.</b> Rental options dialog box that appears to users.</figcaption></figure>
  </li>
  <li>
    <p>Enter values for the fields defined in the following table:</p>

    <table class="grid">
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Title</strong></td>
      <td>A name to refer to this item. This title doesn’t appear to users. Type <strong>Daily Pass</strong> for convenience.</td>
    </tr>
    <tr>
      <td><strong>SKU</strong></td>
      <td>A unique-to-your-app string that becomes the ID for the item. For example, “com.amazon.example.iap.mydailypassitem”. The SKUs used by your app must match the SKUs that you submit to the Amazon Appstore. The same SKU character requirements as before (when you created an app) apply here too.</td>
    </tr>
    <tr>
      <td><strong>Content delivery</strong></td>
      <td>Choose <strong>No additional file required</strong> since the content to be delivered is included as part of the app.</td>
    </tr>
  </tbody>
</table>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>

    <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> You must save the information that you have entered on one tab before moving to the next tab.</div>
  </li>
  <li>
    <p>Click the <strong>Availability &amp; Pricing</strong> tab and complete the details as described in the following table.</p>

    <table class="grid">
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Are you charging for this consumable / entitlement?</strong></td>
      <td>Select <strong>Yes, my base price is…</strong> A field displays allowing you to set the base price and currency for the item. After you set the base price, you can manually set the price for other currencies, or allow the Amazon Appstore to set those prices for you, based on conversion rates and taxes. Valid prices (in USD) can either be $0.00 or range from $0.99 to $99.00.</td>
    </tr>
    <tr>
      <td><strong>When would you like this item to be available?</strong></td>
      <td>Specify a date (IAP uses the PST time zone) for the item to become available in your app. If you leave this field blank, the item will become available as soon as it is approved by the Amazon Appstore.</td>
    </tr>
  </tbody>
</table>
  </li>
  <li>Click <strong>Save</strong>.</li>
  <li>Click the <strong>Description</strong> tab.</li>
  <li>
    <p>Complete the <strong>Display Title</strong> and <strong>Description</strong> fields.</p>

    <p>These fields appear in the dialog box after users click <strong>Daily Pass</strong>:</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iaprentaloptions.png" alt="" /><figcaption><b>Figure 6.</b> Title and Description fields that appear to users.</figcaption></figure>
  </li>
  <li>Click <strong>Save</strong>.</li>
  <li>Click the <strong>Images</strong> tab.</li>
  <li>Upload the two images as indicated based on the size requirements. Only the 114px image appears in the Daily Pass dialog box users see in the app. In the previous screenshot (Figure 6), the image is simply an orange square. For convenience in creating the 512px image, you can upload this <a href="https://images-na.ssl-images-amazon.com/images/G/01/mobile-apps/dex/firetv/512.png">generic image</a>.</li>
  <li>
    <p>Click <strong>Save</strong>.</p>

    <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning:</b> Do not click <strong>Submit In-App Item</strong> button yet. After you submit the in-app item, you cannot edit or remove it. Only click this button after you have fully tested the functionality and content and are ready to submit your app.</div>
  </li>
</ol>

<h2 id="creategopremiumitem">Step 3. Create a Subscription (Go Premium) In-App Item</h2>

<ol>
  <li>If necessary, log in to the Developer Portal, go to the <strong>Dashboard</strong>, and click your app.</li>
  <li>Click the <strong>In-App Items</strong> tab in your app.</li>
  <li>Click the <strong>Add a Subscription</strong> button (for Go Premium). (In the “Subscriptions are not supported by Amazon Underground” prompt, click the <strong>Add a Subscription</strong> button again.)</li>
  <li>
    <p>Enter values for the fields defined in the following table:</p>

    <table class="grid">
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Title</strong></td>
      <td>A name to refer to this item. This title doesn’t appear to users. Type <strong>Go Premium</strong> for convenience.</td>
    </tr>
    <tr>
      <td><strong>SKU</strong></td>
      <td>A unique-to-your-app string that becomes the ID for the item. For example, “com.amazon.example.iap.mygopremiumitem.” The SKUs used by your app must match the SKUs that you submit to the Amazon Appstore. The same SKU character requirements as before (when you created an app) apply here too.</td>
    </tr>
    <tr>
      <td><strong>Content delivery</strong></td>
      <td>Choose <strong>No additional file required</strong> since the content to be delivered is included as part of the app.</td>
    </tr>
  </tbody>
</table>
  </li>
  <li>
    <p>Click <strong>Save</strong>.</p>

    <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> You must save the information that you have entered on one tab before moving to the next tab.</div>
  </li>
  <li>
    <p>Click the <strong>Subscription Periods</strong> tab and complete the fields as defined in the following table.</p>

    <table class="grid">
  <thead>
    <tr>
      <th>Field</th>
      <th>Description</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><strong>Subscription Period</strong></td>
      <td>Select the subscription duration you want. Subscription periods start on the date of purchase.</td>
    </tr>
    <tr>
      <td><strong>SKU</strong></td>
      <td>Enter a unique SKU (using the same guidelines as the other SKU fields) that corresponds to this subscription period. For example, “com.amazon.example.calypso.monthly”. This SKU is a child SKU of the SKU that you entered on the item detail page.</td>
    </tr>
    <tr>
      <td><strong>Free Trial</strong></td>
      <td>If desired, specify an optional free trial period for the subscription.</td>
    </tr>
    <tr>
      <td><strong>Are you charging for this subscription?</strong></td>
      <td>Select <strong>Yes, my base price is…</strong>. A field displays allowing you to set the base price and currency for the item. After you set the base price, you can manually set the price for other currencies, or allow the Amazon Appstore to set those prices for you, based on conversion rates and taxes. Valid prices (in USD) can either be $0.00 or range from $0.99 to $99.00.</td>
    </tr>
    <tr>
      <td><strong>When would you like this item to be available?</strong></td>
      <td>Specify a date (IAP uses the PST time zone) for the item to become available in your app. If you leave this field blank, the item will become available as soon as it is approved by the Amazon Appstore.</td>
    </tr>
  </tbody>
</table>

    <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> Ignore the “Save and Add a Subscription Period” button. The Purchasing Component supports only one subscription period.</div>
  </li>
  <li>Click <strong>Save</strong>.</li>
  <li>Click the <strong>Description</strong> tab.</li>
  <li>
    <p>Complete the <strong>Display Title</strong> and <strong>Description</strong> fields.</p>

    <p>These fields appear in the dialog box after users click <strong>Go Premium</strong>:</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iaprentaloptions.png" alt="" /><figcaption><b>Figure 7.</b> Title and Description fields that appear to users.</figcaption></figure>
  </li>
  <li>Click <strong>Save</strong>.</li>
  <li>Click the <strong>Images</strong> tab.</li>
  <li>The image icons are required by the Developer Console, but unlike with Daily Pass (consumables), <em>neither</em> image is used in the Go Premium dialog box users see in the app. For convenience, you can upload this generic <a href="https://images-na.ssl-images-amazon.com/images/G/01/mobile-apps/dex/firetv/114.png">114px image</a> and this generic <a href="https://images-na.ssl-images-amazon.com/images/G/01/mobile-apps/dex/firetv/512.png">512px image</a> image.</li>
  <li>
    <p>Click <strong>Save</strong>.</p>

    <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning:</b> Do not click <strong>Submit In-App Item</strong> button yet. After you submit the in-app item, you cannot edit or remove it. Only click this button after you have fully tested the functionality and content and are ready to submit your app.</div>
  </li>
</ol>

<h2 id="downloadjson">Step 4. Download and Push the JSON Data File</h2>

<p>After you have configured both the Daily Pass and Go Premium in-app items, you will download a JSON file containing details about your in-app items.</p>

<ol>
  <li>If necessary, log in to the Developer Portal, go to the <strong>Dashboard</strong>, and click your app.</li>
  <li>Click the <strong>In-App Items</strong> tab in your app.</li>
  <li>
    <p>Click the <strong>JSON Data File</strong> button to download the JSON file containing your in-app item details.</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_jsonfiledownload.png" alt="" /></figure>
  </li>
  <li>In your terminal, <code class="highlighter-rouge">cd</code> to the directory containing this file.</li>
  <li>
    <p>Push the JSON file to your Fire TV device using the following command:</p>

    <div class="language-bash highlighter-rouge"><pre class="highlight"><code><span class="gp">$ </span>adb push amazon.sdktester.json /mnt/sdcard/
</code></pre>
    </div>

    <p>The response will show the following: <code class="highlighter-rouge">[100%] /mnt/sdcard/amazon.sdktester.json</code></p>
  </li>
</ol>

<h2 id="enableiap">Step 5. Enable the In-App Purchasing Component in your App</h2>

<p>Now that you’ve created your in-app items in the Developer Console, you need to enable the IAP component in your app.</p>

<ol>
  <li>Load the Amazon In-App Purchasing component into your app. See the <a href="fire-app-builder-load-a-component.html">Load a Component</a> for details about how to load a component into your app.</li>
  <li>In Android Studio (in the Android view), expand the <strong>ContentBrowser</strong> folder and go to <strong>res &gt; values</strong> and open the custom.xml file.</li>
  <li>
    <p>Copy the following string:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bool</span> <span class="na">name=</span><span class="s">"is_iap_disabled"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/bool&gt;</span>
</code></pre>
    </div>

    <p>(Ignore the <code class="highlighter-rouge">override_all_contents_subscription_flag</code> field.)</p>
  </li>
  <li>In your <strong>app</strong> folder, open the <strong>custom.xml</strong> file (located in <strong>res &gt; values</strong>).</li>
  <li>
    <p>Paste the string you copied earlier and change the value to <code class="highlighter-rouge">false</code>. Make sure to paste this string inside the <code class="highlighter-rouge">resources</code> tags:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bool</span> <span class="na">name=</span><span class="s">"is_iap_disabled"</span><span class="nt">&gt;</span>false<span class="nt">&lt;/bool&gt;</span>
</code></pre>
    </div>

    <div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> Note that this is a double negative, so in this case <code class="highlighter-rouge">false</code> is actually enabling IAP in your app.</div>

    <p>The values in your app’s custom.xml will overwrite any values in the components.</p>
  </li>
</ol>

<h2 id="mapinappitems">Step 6. Map In-App Items to Content in Your App</h2>

<ol>
  <li>
    <p>In Android Studio (in the Android view), expand the <strong>PurchaseInterface</strong> folder and go to <strong>assets</strong>. Then open the <strong>skuslist.json</strong> file.</p>
  </li>
  <li>
    <p>For “Go Premium” items, replace the fields in red with your Go Premium item’s SKU value:</p>

    <pre>
{
  "skusList": [
    {
      "sku": "<span class="red">testSubSku</span>",
      "productType": "SUBSCRIBE",
      "purchaseSku": "<span class="red">testSubSku</span>"
    },
    {
      "sku": "RentUnPurchased",
      "productType": "RENT",
      "purchaseSku": "RentUnPurchased"
    }
  ],
  "actions": {
    "CONTENT_ACTION_DAILY_PASS": "RentUnPurchased",
    "CONTENT_ACTION_SUBSCRIPTION": "<span class="red">testSubSku</span>"
  }
}
</pre>

    <p>Go Premium items are subscriptions.</p>
  </li>
  <li>
    <p>For “Daily Pass” items, replace the fields in red with your Daily Pass item’s SKU value:</p>

    <pre>
{
  "skusList": [
    {
      "sku": "testSubSku",
      "productType": "SUBSCRIBE",
      "purchaseSku": "testSubSku"
    },
    {
      "sku": "<span class="red">RentUnPurchased</span>",
      "productType": "RENT",
      "purchaseSku": "<span class="red">RentUnPurchased</span>"
    }
  ],
  "actions": {
    "CONTENT_ACTION_DAILY_PASS": "<span class="red">RentUnPurchased</span>",
    "CONTENT_ACTION_SUBSCRIPTION": "testSubSku"
  }
}
</pre>

    <p>Daily Pass items are rentals.</p>
  </li>
</ol>

<h2 id="buttontext">Step 7. Customize the Button Text</h2>

<p>You can customize the “Daily Pass” or the “Go Premium” text that appears on the buttons on the Content Details screen.</p>

<p>To customize the text:</p>

<ol>
  <li>Go to <strong>ContentBrowser &gt; res &gt; values</strong> and open the <strong>strings.xml</strong> file.</li>
  <li>
    <p>Copy the following strings and paste them into your app’s <strong>custom.xml</strong> file:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"premium_1"</span><span class="nt">&gt;</span>Go<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"premium_2"</span><span class="nt">&gt;</span>Premium<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"daily_pass_1"</span><span class="nt">&gt;</span>Daily<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"daily_pass_2"</span><span class="nt">&gt;</span>Pass<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>

    <p>You can also copy other strings related to the Purchasing Component here as well:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"iap_error_dialog_title"</span><span class="nt">&gt;</span>Purchase Error<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"subscription_expired"</span><span class="nt">&gt;</span>Your subscription expired!<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"ok"</span><span class="nt">&gt;</span>Ok<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>
  </li>
  <li>Customize the string values as desired.</li>
</ol>

<h2 id="apptester">Step 8. Set Up the App Tester</h2>

<p>Now that you’ve set up your in-app items and configured your app, it’s time to test out the integration and see how IAP interacts with your media.</p>

<p>To test the in-app items in your app — without actually making purchases and before submitting your app to the Appstore — you need to use the IAP App Tester. The App Tester simulates calls to the In-App Purchasing API using a sandbox server. The App Tester intercepts the outgoing call to the In-App Purchasing API and returns a valid receipt, authorizing the transaction. (For more details, see <a href="https://developer.amazon.com/public/apis/earn/in-app-purchasing/docs-v2/installing-and-configuring-app-tester">Installing and Configuring the App Tester</a>.)</p>

<p>To set up the App Tester:</p>

<ol>
  <li>
    <p>Using your computer’s browser, go to the <a href="https://www.amazon.com/gp/product/?ie=UTF8&amp;ASIN=B00BN3YZM2&amp;ref=mas_ty">App Tester from the AppStore</a>, get the app (it’s free), and deliver it to your device.</p>

    <p>To deliver this app to your device, you must be signed in to Amazon with the same credentials as you used in setting up your Fire TV. Use the “Deliver to” options to deliver the app to your device:</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_apptesterdelivery.png" alt="" /><figcaption><b>Figure 9.</b> The Delivery options allows you to send the app to your Fire TV device.</figcaption></figure>
  </li>
  <li>On your Fire TV, sync your purchases with your device by going to <strong>Settings &gt; My Account &gt; Sync Amazon Content</strong>.</li>
  <li>From the Fire TV home screen, go to <strong>Apps</strong> and select <strong>Your Apps Library</strong>.</li>
  <li>Select the <strong>Amazon App Tester</strong> app and download and install the app from the cloud.</li>
  <li>Launch the app after the download completes.</li>
  <li>
    <p>Click the <strong>In-App Purchasing API</strong> section.</p>

    <figure><img style="max-width: 650px" class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_iaptester.png" alt="" /><figcaption><b>Figure 10.</b> In-App Purchasing API option.</figcaption></figure>
  </li>
  <li>Select <strong>5. IAP Items in JSON File</strong> and verify that items from your amazon.sdktester.json file appear here.</li>
</ol>

<h3 id="simulate-calls">Simulate Calls</h3>

<p>With your app and the testing tool configured, you can now simulate calls to the IAP service.</p>

<ol>
  <li>Using <a href="fire-app-builder-connecting-adb-to-fire-tv.html">ADB</a>, start your app.</li>
  <li>Browse to media in your app.</li>
  <li>Click the <strong>Daily Pass</strong> or <strong>Subscribe</strong> button.</li>
</ol>

<h3 id="adjust-in-app-items">Adjust In-App Items</h3>

<p>You may want to adjust the Title and Description fields on the Description tab based on how the text appears in your app.</p>

<p>You can adjust the text or other features in your in-app items by logging into the Developer Console, clicking your app, and going to the In-App Items tab. As long as you haven’t submitted your app, all the fields remain editable.</p>

<h3 id="reset-purchases">Reset Purchases</h3>

<p>As you’re testing the functionality, you can reset any Daily Pass or Go Premium purchases by doing the following:</p>

<ol>
  <li>Go to <strong>Settings &gt; Applications &gt; Manage Installed Applications &gt; Amazon App Tester</strong>.</li>
  <li>Select <strong>Clear data</strong> and <strong>Clear cache</strong>.</li>
</ol>

<h2 id="additionalsecurity">Implementing Additional Security Through the Receipt Verification Service</h2>

<p>When users purchase a Daily Pass or Subscription to your media, the IAP API returns a receipt to your app indicating whether the transaction was valid. Since your users own the Fire TV device, it’s possible for hackers to re-route the outgoing call to the IAP API and spoof the receipt.</p>

<p>To verify that the receipt returned from the IAP API is valid, you can set up <em>your own service</em> to call Amazon’s <a href="https://developer.amazon.com/public/apis/earn/in-app-purchasing/docs-v2/verifying-receipts-in-iap-2.0">Receipt Verification Service</a>.</p>

<p>Here’s the general process for verifying receipts with the Receipt Verification Service using Fire App Builder:</p>

<ul>
  <li>You set up your own server (using any language/platform) to send the receipt and an accompanying secret to the Receipt Verification Service, asking whether the receipt is valid.</li>
  <li>Your app sends a request with the required properties and shared secret to the Receipt Verification Service to check the receipt. The required values can be found in <strong>AmazonInAppPurchaseComponent &gt; res &gt; values values.xml</strong>.</li>
  <li>After verifying the secret, the Receipt Verification Service determines whether the receipt is valid and responds with a true or false answer.</li>
</ul>

<p>This workflow is not included in Fire App Builder. By default, Fire App Builder just makes a call to a dummy service that always returns valid. Specifically, in Fire App Builder, the <code class="highlighter-rouge">AReceiptVerifier</code> class (in the AmazonInAppPurchaseComponent folder) is an abstract class that you extend with your own subclass to call the Receipt Verification Service.</p>

<p><code class="highlighter-rouge">DefaultReceiptVerificationService</code> is a sample subclass in Fire App Builder that extends <code class="highlighter-rouge">AReceiptVerifier</code>. The <code class="highlighter-rouge">validateReceipt</code> method inside <code class="highlighter-rouge">DefaultReceiptVerificationService</code> implements all the required parameters needed by the Receipt Verification Service:</p>

<ul>
  <li><code class="highlighter-rouge">context</code>:   The application context</li>
  <li><code class="highlighter-rouge">requestId</code>: The request id for this request</li>
  <li><code class="highlighter-rouge">sku</code>:       SKU for the receipt</li>
  <li><code class="highlighter-rouge">userData</code>:  User data of the current user</li>
  <li><code class="highlighter-rouge">receipt</code>:   The receipt to validate</li>
  <li><code class="highlighter-rouge">listener</code>:  The listener of this request</li>
  <li><code class="highlighter-rouge">return</code>: The request id</li>
</ul>

<p>However, <code class="highlighter-rouge">validateReceipt</code> doesn’t actually call the Receipt Verification Service. Instead, this method just returns a status of successful.</p>

<p>You must create your own subclass to extend <code class="highlighter-rouge">AReceiptVerifier</code> with an actual call to the Receipt Verification Service. (Alternatively, you can customize the <code class="highlighter-rouge">DefaultReceiptVerificationService</code> subclass.)</p>

<p>When you create the subclass, you must provide your subclass name in your app’s custom.xml file by doing the following:</p>

<ol>
  <li>Go to <strong>AmazonInAppPurchaseComponent &gt; res &gt; values</strong> and open the <strong>strings.xml</strong> file.</li>
  <li>
    <p>Copy the following <code class="highlighter-rouge">receipt_verification_service_iap</code> string, and paste it into your app’s <strong>custom.xml</strong> file (inside app &gt; resources):</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"receipt_verification_service_iap"</span><span class="nt">&gt;</span>com.amazon.inapppurchase.DefaultReceiptVerificationService<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>
  </li>
  <li>In your app’s <strong>custom.xml</strong> file, update the string’s value with the complete path to your subclass. By default, the <code class="highlighter-rouge">DefaultReceiptVerificationService</code> is configured. You can either create a new subclass or simply overwrite the <code class="highlighter-rouge">DefaultReceiptVerificationService</code> class.</li>
</ol>

<p>For more details on calling the Receipt Verification Service, see <a href="https://developer.amazon.com/public/apis/earn/in-app-purchasing/docs-v2/verifying-receipts-in-iap-2.0">Receipt Verification Service</a>.</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> The level of security you implement depends on the resources you want to expend verifying legitimate transactions. If it makes sense to manage your own server to verify receipts (because your revenue exceeds the cost of managing your own server), you should implement this additional security with the Receipt Verification Service. However, if revenue from your app doesn’t exceed the cost or hassle of managing your own server, you might want to omit this extra setup.</div>

<h2 id="submitting-in-app-items-to-production">Submitting In-App Items to Production</h2>

<p>So far this documentation has explained how to configure your app in a test environment. When you’re ready to submit your app to the app store, you need to also submit the in-app items.</p>

<p>To submit the in-app items:</p>

<ol>
  <li>Log in to the Developer Portal, go to the <strong>Dashboard</strong>, and click your app.</li>
  <li>Click the <strong>In-App Items</strong> tab in your app.</li>
  <li>Click the <strong>Submit In-App Item</strong> button.</li>
</ol>

<p>After you submit your in-app items, you can no longer edit them. If you need to change the in-app items that have already been submitted, you will need to either <a href="https://developer.amazon.com/public/support/submitting-your-app/tech-docs/submitting-your-app#Updating an Existing App">create a new version of your app</a> or create a new app and add new in-app items to the app.</p>




            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, skills, and more. </p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a class="noCrossRef" href="https://developer.amazon.com/"> Developer Portal</a></li>
                    <li><a class="noCrossRef" href="/index.html">Documentation Home</a></li>
                    <li class="noCrossRef"><a href="https://developer.amazon.com/support"> Support</a></li>
                    <li class="noCrossRef"><a href="https://aws.amazon.com/documentation/"> AWS docs</a></li>
                    <li class="noCrossRef"><a href="https://www.amazon.com/mobile-apps/b?ie=UTF8&node=2350149011"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://developer.amazon.com/blogs"> Blog</a></li>
                    <li class="noCrossRef"><a href="https://www.youtube.com/channel/UCT9ApARFgQJOeqD-ygmxnJQ"> YouTube</a></li>
                    <li class="noCrossRef"><a href="https://twitter.com/AmazonAppDev"> Twitter</a></li>
                    <li class="noCrossRef"><a href="http://phx.corporate-ir.net/phoenix.zhtml?p=irol-mediahome&c=176060"> Amazon Press Room</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/23/index.html"> Alexa Skills Kit</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/33/index.html"> Smart Home Skill API</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/38/index.html"> Alexa Voice Service</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/167/index.html"> Appstore</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/12/index.html"> Underground</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/166/index.html"> Fire Devices</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/61/index.html"> Dash</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-12">
            <p>© 1996-2017, Amazon.com, Inc. or its affiliates</p>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->



</body>

</html>
