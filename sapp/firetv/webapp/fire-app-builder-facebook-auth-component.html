<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>Facebook Authorization Component | Fire App Builder</title>
    
    <base target="_self">
    <meta name="description" content="With the Facebook Auth Component, you can prompt users to log in using Facebook before they watch media (or perform some other action).  The User Experience... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">
<!--
    Licensed under the Apache License, Version 2.0 (the "License"). You may not use this file except in compliance with the License. A copy of the License is located at http://aws.amazon.com/apache2.0/ or in the "license" file accompanying this file. This file is distributed on an "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the License for the specific language governing permissions and limitations under the License. This site also includes third-party software subject to various copyrights. The licenses for these third party components are referenced in the NOTICE file.
-->

    <!-- FontAwesome -->
   <link rel="stylesheet" type="text/css" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    <!-- jQuery -->
    <script src="https://code.jquery.com/jquery-3.1.1.min.js" integrity="sha256-hVVnYaiADRTO2PzUGmuLJr8BLUSjGIZsDYGmIJLv2b8=" crossorigin="anonymous"></script>
    <!-- jQuery -->
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>
    <!-- Navgoco -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>
    <!-- Bootstrap -->
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <!-- TOC generator-->
    <script src="assets/js/toc.js"></script>
    <!-- Anchor JS -->
    
        <script src="assets/js/anchor.min.js"></script>
    

    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--Bootstrap -->

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" />
    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "Table of Contents"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="fa fa-bars fa-2x"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="https://developer.amazon.com/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="index.html">Documentation Home</a></li>
                    
                    
                    <li><a href="https://github.com/amzn/appstore-alexa-docs/issues" class="noCrossRef">Log Doc Issue</a></li>
                    <li><a target="_blank" href="https://github.com/amzn/appstore-alexa-docs/blob/github-docs/_docs/firetv/fireappbuilder/4. Add Components/Authorization Components/fire-app-builder-facebook-auth-component.md" class="editButton noCrossRef"><i class="fa fa-github fa-lg"></i> Edit on GitHub</a></li>
                    
                    <li><a href="https://forums.developer.amazon.com/spaces/43/index.html" class="editButton noCrossRef">Fire TV Forum</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    


                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="Global Search ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>


        <!-- /.container -->
    </nav>


<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar - uses Lunr.js  -->

<div class="sidebarSearchBar">
<form action="search-fireappbuilder.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="Product Search ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fire App Builder</div>
<p class="external">
    <a href="#" id="collapseAll">Collapse All</a> | <a href="#" id="expandAll">Expand All</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Introduction</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-overview.html">Fire App Builder Introduction</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-release-notes.html">Release Notes</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-end-to-end-process.html">Beginning-to-End Process Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-questions-and-answers.html">Miscellaneous Questions</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">1. Get Set Up</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-download-and-build.html">Download Fire App Builder and Build an App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-connecting-adb-to-fire-tv.html">Connect to Fire TV Through ADB</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-app-tour.html">Take an App Tour</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">2. Configure Your Feed</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-load-media-feed.html">Load Your Media Feed</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-overview.html">Recipe Configuration Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-categories.html">Set Up the Categories Recipe</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-content.html">Set Up the Contents Recipe</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator.html">Navigator Configuration Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-token-feeds.html">Configure Navigator -- Token-based Feeds</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-open-feeds.html">Configure Navigator -- Open Feeds</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">3. Customize the Appearance</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-customize-look-and-feel.html">Customize the Look and Feel</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">4. Add Components</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-interfaces-and-components.html">Components Overview</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-load-a-component.html">Load a Component</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-create-a-new-component.html">Create Your Own Fire App Builder Component</a></li>
            
            

            

            <li class="level2"><a class="subfoldersTitle" href="#">Ads Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-freewheel-ads-component.html">FreeWheel Ads Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-vast-ads-component.html">VAST Ads Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Analytics Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-crashlytics-component.html">Crashlytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-flurry-analytics-component.html">Flurry Analytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-google-analytics-component.html">Google Analytics Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-omniture-analytics-component.html">Omniture Analytics Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Authorization components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-adobe-pass-auth-component.html">Adobe Pass Authorization Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items open"><a href="fire-app-builder-facebook-auth-component.html">Facebook Authorization Component</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-login-with-amazon-component.html">Login with Amazon Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Purchasing Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-in-app-purchase-component.html">Amazon In-App Purchasing Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Media Components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-media-player-component.html">Amazon Media Player Component</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            
        </ul>

        
    <li class="level1"><a href="#">Other Development Topics</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-pulling-updates-from-github.html">Pull Updates from Github</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-live-stream-configuration.html">Configure Live Streams</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-catalog-integration.html">Integrate Your Media into the Fire TV Catalog</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-use-an-android-tv-emulator.html">Use an Android TV Emulator to Run Your App</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-json.html">Querying JSON</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-xml.html">Querying XML</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-troubleshooting.html">Troubleshooting</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">Related Resources</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Fire TV</a></li>
        
        <li><a class="noCrossRef" href="/integrating-your-catalog-with-fire-tv.html">Fire TV Catalog Integration</a></li>
        
        <li><a class="noCrossRef" href="https://developer.amazon.com/app-testing-service">App Testing Service</a></li>
        
        <li><a class="noCrossRef" href="/appstore-understanding-submission.html">Appstore Publishing</a></li>
        
        <li><a class="noCrossRef" href="/getting-started-with-iap.html">In-App Purchasing API</a></li>
        
        <li><a class="noCrossRef" href="/understanding-the-amazon-fling-service">Fling SDK</a></li>
        
        <li><a class="noCrossRef" href="">Developer Portal Forums</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">

                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> > <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a> > Fire App Builder </div>

                    <h1>Facebook Authorization Component</h1>

                    <p>With the Facebook Auth Component, you can prompt users to log in using Facebook before they watch media (or perform some other action).</p>

<ul id="markdown-toc">
  <li><a href="#the-user-experience-with-facebook-authorization" id="markdown-toc-the-user-experience-with-facebook-authorization">The User Experience with Facebook Authorization</a></li>
  <li><a href="#configuration-overview" id="markdown-toc-configuration-overview">Configuration Overview</a></li>
  <li><a href="#getappidtoken" id="markdown-toc-getappidtoken">Step 1. Get a Facebook App ID and Client Token</a></li>
  <li><a href="#configurefireappbuilderfb" id="markdown-toc-configurefireappbuilderfb">Step 2. Configure Your App</a></li>
  <li><a href="#step3" id="markdown-toc-step3">Step 3. Encrypt the Facebook App ID and Token Values</a></li>
  <li><a href="#step-4-decide-when-to-prompt-users-to-log-instep4" id="markdown-toc-step-4-decide-when-to-prompt-users-to-log-instep4">Step 4. Decide When to Prompt Users to Log In{#step4}</a></li>
  <li><a href="#step-5-customize-the-ui-textstep5" id="markdown-toc-step-5-customize-the-ui-textstep5">Step 5. Customize the UI Text{#step5}</a></li>
  <li><a href="#disable-users-ability-to-postpone-login" id="markdown-toc-disable-users-ability-to-postpone-login">Disable User’s Ability to Postpone Login</a></li>
  <li><a href="#looking-at-the-logs-for-facebook-auth-component-actions" id="markdown-toc-looking-at-the-logs-for-facebook-auth-component-actions">Looking at the Logs for Facebook Auth Component Actions</a></li>
</ul>

<h2 id="the-user-experience-with-facebook-authorization">The User Experience with Facebook Authorization</h2>

<p>If you require users to log in before playing media, users will see the following prompt after clicking “Watch Now” on the Content Details screen:</p>

<figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_loginprompt.png" alt="" /><figcaption>Login prompt when verifyScreenAccess is set to true for the PlaybackActivity</figcaption></figure>

<p>If a user clicks <strong>Later</strong>, he or is able to watch media without logging into Facebook. (Currently, there isn’t a later prompt that asks the user again.)</p>

<p>If a user clicks <strong>Now</strong>, he or she is prompted to log into Facebook via a computer browser:</p>

<figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_fbprompt.png" alt="" /><figcaption>Prompt to log into Facebook.</figcaption></figure>

<p>After logging in, Facebook shows the following screenshot:</p>

<figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_fbloginsuccessbrowser.png" alt="" /><figcaption>Facebook login success on the browser</figcaption></figure>

<p>After clicking <strong>Continue</strong> on the browser window, the user clicks <strong>Submit</strong> on the Facebook Login prompt on the Fire TV screen.</p>

<h2 id="configuration-overview">Configuration Overview</h2>

<p>Follow these steps to configure the Facebook Authorization Component</p>

<ul>
  <li><a href="#getappidtoken">Step 1. Get a Facebook App ID and Client Token</a></li>
  <li><a href="#configurefireappbuilderfb">Step 2. Configure Your App</a></li>
  <li><a href="#step3">Step 3. Encrypt the Facebook App ID and Token Values</a></li>
  <li><a href="#step4">Step 4. Decide When to Prompt Users to Log In</a></li>
  <li><a href="#step5">Step 5. Customize the UI Text</a></li>
</ul>

<h2 id="getappidtoken">Step 1. Get a Facebook App ID and Client Token</h2>

<p>First you must set up a Facebook app to get the app ID and client token. Note that the app name you choose will be visible when users log in via their computer browsers, so choose a name (usually your Fire TV app’s name) that you want users to see.</p>

<p>Note that these instructions were written in June 2016. Facebook may have changed some of the button names, steps, or workflow since that time.</p>

<p>To create a Facebook app:</p>

<ol>
  <li>Go to <a href="https://developers.facebook.com/docs/apps/register">Register and Configure an App</a> in the Facebook for Developers site and create a Facebook app. Be sure to follow steps 1, 2, and 3.</li>
  <li>After you click <strong>Create new Facebook App</strong> in step 3, select <strong>Android</strong>.</li>
  <li>In the “Quick Start for Android” screen, type a name for your app (use the same name as your Fire TV app). Then click <strong>Create New Facebook App ID</strong>.</li>
  <li>Complete the required fields to create a Facebook app. In the “Tell us about your Android project” section, note that the “Package Name” and “Default Activity Class Name” are required but won’t actually be used since these fields relate to Google Play.</li>
  <li>When you click <strong>Next</strong>, you’re prompted with a “Google Play Package Name” dialog box indicating that it can’t find your package name in Google Play. Click <strong>Use this package name</strong> to ignore the message.</li>
  <li>An additional section appears: “Add your development and release key hashes.” Follow the steps in this section to generate a key hash and add it in the <strong>Key Hashes</strong> field. Then click <strong>Next</strong>.</li>
  <li>You’ve finished the Quick Start for Android. In the upper-right corner of the screen, select <strong>My Apps</strong> and select your new app.</li>
  <li>In the left sidebar, under <strong>PRODUCTS</strong>, click <strong>+ Add Product</strong>.</li>
  <li>Next to <strong>Facebook Login</strong>, click <strong>Get Started</strong>.</li>
  <li>
    <p>In the <strong>Client OAuth Settings</strong> section, turn on <strong>Login from Devices</strong>.</p>

    <figure><img class="docimage " src="docs/firetv/fireappbuilder/images/fireappbuilder_fbloginsetting.png" alt="" /><figcaption>Client OAuth settings for your Facebook app.</figcaption></figure>
  </li>
  <li>Click <strong>Save Changes</strong>.</li>
  <li>In the left sidebar, click <strong>Settings &gt; Basic</strong>. Copy the <strong>App ID</strong> into a convenient place.</li>
  <li>In the left sidebar, click <strong>Settings &gt; Advanced</strong>. Copy the <strong>Client Token</strong> into a convenient place.</li>
</ol>

<h2 id="configurefireappbuilderfb">Step 2. Configure Your App</h2>

<p>The Facebook Auth Component should already be loaded in the sample app in Fire App Builder, but you will need to configure the component.</p>

<ol>
  <li>The Facebook Auth Component is already loaded in the sample app built with Fire App Builder. If it isn’t loaded due to updates you’ve made, see <a href="fire-app-builder-load-a-component.html">Load a Component in Your App</a>.</li>
  <li>
    <p>Remove any other authentication components that are loaded in your app (such as AdobepassAuthComponent or LoginWithAmazonComponent). See <a href="fire-app-builder-load-a-component.html#removeacomponent">Remove a Component</a> for details.</p>

    <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> You can load only <em>one</em> component per interface. For example, you cannot load both the Adobe Pass Auth component <em>and</em> the Pass Through Login component, because both components use the same <code class="highlighter-rouge">IAuthentication</code> interface. For a list of the components by interface, see <a href="fire-app-builder-interfaces-and-components.html">Components Overview</a>.</div>
  </li>
</ol>

<h2 id="step3">Step 3. Encrypt the Facebook App ID and Token Values</h2>

<p>You must insert an encrypted version of the Facebook app ID and client token into your app. To encrypt your app ID and client token:</p>

<ol>
  <li>Expand the <strong>FacebookAuthComponent &gt; res &gt; values</strong> folder and open the <strong>strings.xml</strong> file.</li>
  <li>
    <p>Copy the following strings and paste them into your app’s <strong>custom.xml</strong> file:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_fb_client_token"</span><span class="nt">&gt;</span>YOUR_ENCRYPTED_FB_APP_CLIENT_TOKEN<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_fb_app_id"</span><span class="nt">&gt;</span>YOUR_ENCRYPTED_FB_APP_ID<span class="nt">&lt;/string&gt;</span>
    
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_1"</span><span class="nt">&gt;</span>fb_random_key_1<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_2"</span><span class="nt">&gt;</span>fb_random_key_2<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_3"</span><span class="nt">&gt;</span>fb_random_key_3<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_4"</span><span class="nt">&gt;</span>fb_random_key_4<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_5"</span><span class="nt">&gt;</span>fb_random_key_5<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_6"</span><span class="nt">&gt;</span>fb_random_key_6<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>

    <div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> As a best practice to integrate future updates, always copy values from the component’s XML files into your app’s custom.xml file. Your app’s XML values will overwrite any values in your component’s XML files.</div>

    <p>The <code class="highlighter-rouge">encrypted_authentication_client_token</code> is the encrypted version of the client token you generated when you created your Facebook app. The <code class="highlighter-rouge">encrypted_authentication_app_id</code> is the encrypted version of the Facebook app ID. You’ll encrypt these values in the upcoming steps. The random keys are used to create the encryption.</p>
  </li>
  <li>
    <p>Type a random alphanumeric string for each of these <code class="highlighter-rouge">fb_key_[#]</code> values. For example:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_1"</span><span class="nt">&gt;</span>odysseusgrEEk2000bc<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_2"</span><span class="nt">&gt;</span>helengreekFAce5000ships<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_3"</span><span class="nt">&gt;</span>homer@1storyTllr20<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_4"</span><span class="nt">&gt;</span>latinusOdysseusson332<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_5"</span><span class="nt">&gt;</span>calypsoIslandShipBLLd99<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"fb_key_6"</span><span class="nt">&gt;</span>athenazeusEPICodysseY77<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>
  </li>
  <li>In the Android View, expand the <strong>Utils &gt; java &gt; com &gt; amazon &gt; utils &gt; security</strong> folder and open the <strong>ResourceObfuscationStandaloneUtility</strong> class.</li>
  <li>
    <p>In the <code class="highlighter-rouge">getRandomStringsForKey()</code> method, enter the values you used for <code class="highlighter-rouge">fb_key_1</code>, <code class="highlighter-rouge">fb_key_2</code>, and <code class="highlighter-rouge">fb_key_3</code> respectively.</p>

    <p>For example, assuming these first 3 keys are the ones displayed in the previous code sample, you would enter the following:</p>

    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">getRandomStringsForKey</span><span class="o">()</span> <span class="o">{</span>

    <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span>
            <span class="s">"odysseusgrEEk2000bc"</span><span class="o">,</span>
            <span class="s">"helengreekFAce5000ships"</span><span class="o">,</span>
            <span class="s">"homer@1storyTllr20"</span>
    <span class="o">};</span>
<span class="o">}</span>
</code></pre>
    </div>

    <p>In this example, the values are as follows:</p>

    <ul>
      <li><code class="highlighter-rouge">odysseusgrEEk2000bc</code> is the value used for <code class="highlighter-rouge">fb_key_1</code>.</li>
      <li><code class="highlighter-rouge">helengreekFAce5000ships</code> is the value used for <code class="highlighter-rouge">fb_key_2</code>.</li>
      <li><code class="highlighter-rouge">homer@1storyTllr20</code> is the value used for <code class="highlighter-rouge">fb_key_3</code>.</li>
    </ul>
  </li>
  <li>
    <p>In the <code class="highlighter-rouge">getRandomStringsForIv()</code> method, enter the values you used for <code class="highlighter-rouge">fb_key_4</code>, <code class="highlighter-rouge">random_key_5</code>, and <code class="highlighter-rouge">random_key_6</code> respectively. For example:</p>

    <div class="language-java highlighter-rouge"><pre class="highlight"><code>    <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span><span class="o">[]</span> <span class="nf">getRandomStringsForIv</span><span class="o">()</span> <span class="o">{</span>
    
        <span class="k">return</span> <span class="k">new</span> <span class="n">String</span><span class="o">[]{</span>
                <span class="s">"latinusOdysseusson332"</span><span class="o">,</span>
                <span class="s">"calypsoIslandShipBLLd99"</span><span class="o">,</span>
                <span class="s">"athenazeusEPICodysseY77"</span>
        <span class="o">};</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre>
    </div>

    <p>In this example, the values are as follows:</p>

    <ul>
      <li><code class="highlighter-rouge">latinusOdysseusson332</code> is the value used for <code class="highlighter-rouge">fb_key_4</code>.</li>
      <li><code class="highlighter-rouge">calypsoIslandShipBLLd99</code> is the value used for <code class="highlighter-rouge">fb_key_5</code>.</li>
      <li><code class="highlighter-rouge">athenazeusEPICodysseY77</code> is the value for <code class="highlighter-rouge">fb_key_6</code>.</li>
    </ul>
  </li>
  <li>
    <p>In the <code class="highlighter-rouge">getPlainTextToEncrypt()</code> method, insert your Facebook client token in place of <code class="highlighter-rouge">Encrypt_this_text</code>:</p>

    <div class="language-java highlighter-rouge"><pre class="highlight"><code> <span class="kd">private</span> <span class="kd">static</span> <span class="n">String</span> <span class="nf">getPlainTextToEncrypt</span><span class="o">()</span> <span class="o">{</span>
        <span class="k">return</span> <span class="s">"Encrypt_this_text"</span><span class="o">;</span>
    <span class="o">}</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Right-click the <strong>ResourceObfuscationStandaloneUtility.java</strong> file and select <strong>Run ‘ResourceObfusc…main()</strong>.</p>
  </li>
  <li>
    <p>Look for the encrypted result printed to the console. It will look something like this:</p>

    <div class="highlighter-rouge"><pre class="highlight"><code>Encrypted version of plain text 123456789 is mTWxLhZeHslQFwpN3irjfQ==
</code></pre>
    </div>
  </li>
  <li>
    <p>Copy your encrypted app ID and paste it into the <code class="highlighter-rouge">encrypted_fb_client_token</code> string’s value in your app’s <strong>custom.xml</strong> file. For example:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_fb_client_token"</span><span class="nt">&gt;</span>rneiu89EIxnk9489faoPoaQ<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_fb_app_id"</span><span class="nt">&gt;</span>YOUR_ENCRYPTED_FB_APP_ID<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>
  </li>
  <li>
    <p>Now insert your Facebook app ID into the <code class="highlighter-rouge">getPlainTextToEncrypt()</code> method, and run the script again (using the same random strings). Copy the encrypted key into the <code class="highlighter-rouge">encrypted_fb_app_id</code> string value in your app’s <strong>custom.xml</strong> file. For example:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_adobe_pass_public_key"</span><span class="nt">&gt;</span>gnobHJEIxnkBMobJk7mBaQ==<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"encrypted_adobe_pass_private_key"</span><span class="nt">&gt;</span>AQ/9Qtc26GzLVSHRe1ftPw==<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>

    <div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> Save your random keys in a safe place, such as your company wiki, so that you always have an easy way to retrieve them. You will need these keys to decrypt the value.</div>
  </li>
</ol>

<h2 id="step-4-decide-when-to-prompt-users-to-log-instep4">Step 4. Decide When to Prompt Users to Log In{#step4}</h2>

<p>You can configure the screen where users should be prompted to log in to Facebook.</p>

<ol>
  <li>Open the <strong>Navigator.json</strong> file (located in your app’s <strong>assets</strong> folder).</li>
  <li>
    <p>Set the <code class="highlighter-rouge">verifyScreenAccess</code> value to <code class="highlighter-rouge">true</code> for the screen where you want users to log in. For example, if you want users to log in before playing media, you would verify screen access at the <code class="highlighter-rouge">PlaybackActivity</code>:</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code>  "com.amazon.android.uamp.ui.PlaybackActivity": {
  "verifyScreenAccess": true,
  "verifyNetworkConnection": true,
  "onAction": "CONTENT_RENDERER_SCREEN"
}
</code></pre>
    </div>

    <p>Now when users launch your app and try to watch media, they will be prompted to log in.</p>
  </li>
</ol>

<h2 id="step-5-customize-the-ui-textstep5">Step 5. Customize the UI Text{#step5}</h2>

<p>To change the text that appears in the dialog box prompting users to log in:</p>

<ol>
  <li>Go to <strong>ContentBrowser &gt; res &gt; values</strong> and open the <strong>strings.xml</strong> file.</li>
  <li>
    <p>Copy the following strings into your app’s <strong>custom.xml</strong> file (inside res &gt; values):</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"optional_login_dialog_title"</span><span class="nt">&gt;</span>Login<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"optional_login_dialog_message"</span><span class="nt">&gt;</span>Do you want to get most of your app by logging in now?<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"now"</span><span class="nt">&gt;</span>Now<span class="nt">&lt;/string&gt;</span>
<span class="nt">&lt;string</span> <span class="na">name=</span><span class="s">"later"</span><span class="nt">&gt;</span>Later<span class="nt">&lt;/string&gt;</span>
</code></pre>
    </div>
  </li>
  <li>Customize the string values.</li>
</ol>

<h2 id="disable-users-ability-to-postpone-login">Disable User’s Ability to Postpone Login</h2>

<p>By default, users have the option of postponing the Facebook login. Currently if users click <strong>Later</strong> at this prompt, they aren’t prompted ever again – this is a bug. To disable the user’s ability to postpone the Facebook login:</p>

<ol>
  <li>Expand the <strong>FacebookAuthComponent &gt; res values</strong> folder and open the <strong>custom.xml</strong> file.</li>
  <li>
    <p>Copy the following strings into your app’s <strong>custom.xml</strong> file (inside res &gt; values):</p>

    <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;bool</span> <span class="na">name=</span><span class="s">"is_authentication_can_be_done_later"</span><span class="nt">&gt;</span>true<span class="nt">&lt;/bool&gt;</span>
</code></pre>
    </div>
  </li>
  <li>Change the string’s value to <code class="highlighter-rouge">false</code>.</li>
</ol>

<h2 id="looking-at-the-logs-for-facebook-auth-component-actions">Looking at the Logs for Facebook Auth Component Actions</h2>

<p>After a user has already logged in, when he or she restarts the Fire TV app, the Facebook Auth Component will automatically check to see if the user is already logged in. Filtering the logcat to show “facebook” only, you will see the following if a user is not logged in:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>06-24 17:39:18.602 29089-29089/com.amazon.android.calypso D/FacebookAuthenticationModuleInitReceiver: IAuthenticationModule initialized.
06-24 17:39:18.684 29089-29089/com.amazon.android.calypso D/FacebookAuthentication: Facebook configured and previous access token is:
06-24 17:39:43.566 29089-29089/com.amazon.android.calypso D/FacebookAuthentication: Checking if user is logged in
06-24 17:39:43.569 29089-29089/com.amazon.android.calypso D/FacebookAuthentication: Access token is null. User not logged in.
06-24 17:39:43.612 29089-29089/com.amazon.android.calypso D/Navigator: FacebookAuthenticationActivity onActivityCreated
</code></pre>
</div>

<p>In this case, the user is not logged in, so the FacebookAuthenticationActivity gets created.</p>

<p>If a user is logged in, the logcat will show something like the following:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>06-24 17:46:27.933 29089-29148/com.amazon.android.calypso D/FacebookApi: Making http call to Facebook url: https://graph.facebook.com/v2.6/device/login_status
06-24 17:46:28.235 29089-29148/com.amazon.android.calypso D/FacebookApi: Response from HTTP call: {"access_token":"AAOA4zsiSjMBAJa42JB2LTTyIjq3hQTAl9RTq5FVA8QxKQFhhBlGlqGXpsqQYX9Puo5ZAZBW2eUgoyYquifpTaZAKS9SJhvJefv0hUMjGqAmjuOVNOxNjZCxQQmA23dc4Xcqhs8goZBIuYmbYKuJnltAopk5dQF4ZD","expires_in":5183946}
06-24 17:46:28.235 29089-29089/com.amazon.android.calypso D/com.amazon.android.auth.facebook.FacebookAuthentication: Storing access token: AAOA4zsiSjMBAJa42JB2LTTyIjq3hQTAl9RTq5FVA8QxKQFhhBlGlqGXpsqQYX9Puo5ZAZBW2eUgoyYquifpTaZAKS9SJhvJefv0hUMjGqAmjuOVNOxNjZCxQQmA23dc4Xcqhs8goZBIuYmbYKuJnltAopk5dQF4ZD
06-24 17:46:28.257 29089-29089/com.amazon.android.calypso D/Navigator: FacebookAuthenticationActivity onActivityPaused
06-24 17:46:28.257 29089-29089/com.amazon.android.calypso D/AnalyticsManager: FacebookAuthenticationActivity onActivityPaused, analytics tracking.
</code></pre>
</div>

<p>Here the access token is retrieved because the session is still active. As a result, the user is automatically logged in.</p>

<p>If you want to change the way the events are reported, you can manually customize the string values in <strong>FacebookAuthComponent &gt; java &gt; com.amazon.android.auth.facebook &gt; FacebookApi.java</strong>. For example, if you do not want to use the term <code class="highlighter-rouge">name</code> in your analytics, you can customize this to another value:</p>

<div class="highlighter-rouge"><pre class="highlight"><code>public static final String NAME = "name";
</code></pre>
</div>

<p>To clear any login settings, scroll down to the bottom of your Fire TV app and click the <strong>Logout</strong> button.</p>




            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, skills, and more. </p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a class="noCrossRef" href="https://developer.amazon.com/"> Developer Portal</a></li>
                    <li><a class="noCrossRef" href="/index.html">Documentation Home</a></li>
                    <li class="noCrossRef"><a href="https://developer.amazon.com/support"> Support</a></li>
                    <li class="noCrossRef"><a href="https://aws.amazon.com/documentation/"> AWS docs</a></li>
                    <li class="noCrossRef"><a href="https://www.amazon.com/mobile-apps/b?ie=UTF8&node=2350149011"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://developer.amazon.com/blogs"> Blog</a></li>
                    <li class="noCrossRef"><a href="https://www.youtube.com/channel/UCT9ApARFgQJOeqD-ygmxnJQ"> YouTube</a></li>
                    <li class="noCrossRef"><a href="https://twitter.com/AmazonAppDev"> Twitter</a></li>
                    <li class="noCrossRef"><a href="http://phx.corporate-ir.net/phoenix.zhtml?p=irol-mediahome&c=176060"> Amazon Press Room</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/23/index.html"> Alexa Skills Kit</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/33/index.html"> Smart Home Skill API</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/38/index.html"> Alexa Voice Service</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/167/index.html"> Appstore</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/12/index.html"> Underground</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/166/index.html"> Fire Devices</a></li>
                    <li class="noCrossRef"><a href="https://forums.developer.amazon.com/spaces/61/index.html"> Dash</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-12">
            <p>© 1996-2017, Amazon.com, Inc. or its affiliates</p>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->



</body>

</html>
