<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>コンテンツレシピをセットアップする | Fire App Builder</title>
    <base target="_self">
    <meta name="description" content="カテゴリの構成では、メディアの一般的なグループを構成しました。この手順では、フィードのコンテンツ (タイトル、説明、画像、ビデオURLなど) をFire App Builderのコンテンツモデルにマップします。レシピ構成の概要については、「レシピ構成の概要」を参照してください。  コンテンツレシピを構成する  queryパラメータ  JSONフィード XMLフィード   matchListパラメータ  <a... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">


    <!-- Load sidebar component -->
    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css">
    <script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <!-- Load jquery.cookie plugin (optional) -->
    <script type="text/javascript" src="assets/js/jquery.cookie.min.js"></script>
    <!-- Load jquery.navgoco plugin js and css files -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>

    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/toc.js"></script>
    <script src="assets/js/anchor.min.js"></script>



    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--stylesheets / link tags loaded here-->

    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "目次"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle topnav</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sr-only">Toggle sidebar</span>
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="https://developer.amazon.com/support" class="noCrossRef">サポート</a></li>
                    
                    
                    
                    <li><a href="https://developer.amazon.com/blogs" class="noCrossRef">ブログ</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    



                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="グローバル検索 ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>

        <!--<div class="navbarbottom">-->
        <!--<div class="container">-->
        <!--

-->
        <!--</div>-->
        <!--</div>-->
        <!-- /.container -->
    </nav>


<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar -->

<div class="sidebarSearchBar">
<form action="search-fireappbuilder_ja.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="製品検索 ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fire App Builder</div>
<p class="external">
    <a href="#" id="collapseAll">すべてを折りたたむ</a> | <a href="#" id="expandAll">すべて展開</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Introduction</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-overview.html">Fire App Builder: JavaベースのAmazon Fire TVおよびAndroidアプリ向けスターターキット</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-release-notes.html">リリースノート</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-end-to-end-process.html">アプリを作成するための一連のプロセス</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-questions-and-answers.html">よくある質問</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">1. Get Set Up</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-download-and-build.html">Fire App Builderをダウンロードして、アプリをビルドする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-connecting-adb-to-fire-tv.html">ADBを使用してFire TVに接続する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-app-tour.html">アプリの概要</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">2. Configure Your Feed</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-load-media-feed.html">メディアフィードをロードする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-overview.html">レシピ構成の概要</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-categories.html">カテゴリレシピをセットアップする</a></li>
            
            

            

            

            
            
            <li class="level1items open"><a href="fire-app-builder-set-up-recipes-content.html">コンテンツレシピをセットアップする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator.html">Navigatorの構成の概要</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-token-feeds.html">Navigatorの構成 -- トークンベースフィード</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-open-feeds.html">Navigatorの構成 -- オープンフィード</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">3. Customize the Appearance</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-customize-look-and-feel.html">アプリのルックアンドフィールをカスタマイズする</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">4. Add Components</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-interfaces-and-components.html">コンポーネントの概要</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-load-a-component.html">アプリにコンポーネントをロードする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-create-a-new-component.html">新しいFire App Builderコンポーネントを作成する</a></li>
            
            

            

            <li class="level2"><a class="subfoldersTitle" href="#">Ads components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-freewheel-ads-component.html">Freewheel広告コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-vast-ads-component.html">VAST広告コンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Analytics components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-crashlytics-component.html">Crashlyticsコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-flurry-analytics-component.html">Flurry Analyticsコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-google-analytics-component.html">Googleアナリティクスコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-omniture-analytics-component.html">Omniture Analyticsコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Authorization components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-adobe-pass-auth-component.html">Adobe Pass認証コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-facebook-auth-component.html">Facebook認証コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-login-with-amazon-component.html">Login with Amazonコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Purchasing components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-in-app-purchase-component.html">Amazonアプリ内課金のコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Media components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-media-player-component.html">Amazon Media Playerコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            
        </ul>

        
    <li class="level1"><a href="#">Other Development Topics</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-pulling-updates-from-github.html">Githubから更新データをプルする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-live-stream-configuration.html">ライブストリーミングを構成する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-catalog-integration.html">Fire TVカタログにメディアを組み込む</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-use-an-android-tv-emulator.html">Android TVエミュレーターを使用してアプリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-json.html">JSONでクエリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-xml.html">XMLでクエリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-troubleshooting.html">トラブルシューティング</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">その他のリソース</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Fire TV</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">
                
                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> 自宅</a> > <a href="index.html" class="noCrossRef productSubtitle"> ドキュメンテーション</a> > Fire App Builder > </div>
                    <h1>コンテンツレシピをセットアップする</h1>

                    

                    <p><a href="fire-app-builder-set-up-recipes-categories.html">カテゴリの構成</a>では、メディアの一般的なグループを構成しました。この手順では、フィードのコンテンツ (タイトル、説明、画像、ビデオURLなど) をFire App Builderのコンテンツモデルにマップします。レシピ構成の概要については、「<a href="fire-app-builder-set-up-recipes-overview.html">レシピ構成の概要</a>」を参照してください。</p>

<ul id="markdown-toc">
  <li><a href="#コンテンツレシピを構成する" id="markdown-toc-コンテンツレシピを構成する">コンテンツレシピを構成する</a>    <ul>
      <li><a href="#queryparameter" id="markdown-toc-queryparameter">queryパラメータ</a>        <ul>
          <li><a href="#queryjson" id="markdown-toc-queryjson">JSONフィード</a></li>
          <li><a href="#queryxml" id="markdown-toc-queryxml">XMLフィード</a></li>
        </ul>
      </li>
      <li><a href="#matchlistparameter" id="markdown-toc-matchlistparameter">matchListパラメータ</a>        <ul>
          <li><a href="#imageresolution" id="markdown-toc-imageresolution">画像の解像度</a></li>
          <li><a href="#tags" id="markdown-toc-tags">お勧めのコンテンツ (タグを使用)</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li><a href="#section" id="markdown-toc-section">次のステップ</a></li>
</ul>

<h2 id="コンテンツレシピを構成する">コンテンツレシピを構成する</h2>

<ol>
  <li><strong>LightCastContentsRecipe.json</strong>ファイル (<strong>app</strong> &gt; <strong>assets</strong> &gt; <strong>recipes</strong>にあります) を開きます。</li>
  <li>
    <p>次の表の説明に従って、ファイルの値を構成します。パラメータの詳細な説明が必要な場合は、表の下の各セクションを参照してください。</p>

    <table>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead>
<tr class="header">
<th>キー</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>
            <p><code class="highlighter-rouge">cooker</code></p>
          </td>
<td>
            <p>このレシピで定義されたパラメータをどのユーティリティが取得してロジックを実行するかを定義します。つまり、レシピを「料理」するのがcookerです。このパラメータはデフォルト値の<code class="highlighter-rouge">DynamicParser</code>のままにしてください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">format</code></p>
          </td>
<td>
            <p>受信データフィードのデータ形式を指定します。指定できる値は<code class="highlighter-rouge">json</code>または<code class="highlighter-rouge">xml</code>です。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">translator</code></p>
          </td>
<td>
            <p>フィードのオブジェクトをFire App Builderのコンテンツモデルに変換する際にトランスレーションとリフレクションのどちらを使用するかを指定します。トランスレーションの方が高速で、推奨される変換方法です。トランスレーションを使用するには、値をデフォルトの <code class="highlighter-rouge">ContentTranslator</code> のままにします。リフレクションを使用する場合は、<code class="highlighter-rouge">translator</code>パラメータをレシピから完全に削除してください。また、リフレクションを使用するには<code class="highlighter-rouge">matchlist</code>パラメータで使用される名前を変更する必要があるため、「<a href="fire-app-builder-questions-and-answers.html#translator">FAQ</a>」で「How do I use reflection…」という質問を参照してください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">model</code></p>
          </td>
<td>
            <p>データのコンテンツモデルを指定します。コンテンツモデルは、コンテンツの構造を指定し、それをFire App Builder UIにマップするためのものです。これは、デフォルトの<code class="highlighter-rouge">com.amazon.android.model.content.Content</code>のままにしてください。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">modelType</code></p>
          </td>
<td>
            <p>フィードが配列と 1 つのオブジェクトのどちらであるかを指定します。指定できる値は<code class="highlighter-rouge">array</code>または<code class="highlighter-rouge">single</code>です。ほとんどのフィードは<code class="highlighter-rouge">array</code>です。たとえば、JSONフィードが山括弧で囲まれている場合や、XMLフィードに入れ子になった角括弧がある場合は、<code class="highlighter-rouge">array</code>を使用します。フィードが 1 つのオブジェクトとして構成されている場合は、<code class="highlighter-rouge">single</code>を使用します。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">query</code></p>
          </td>
<td>
            <p>メディアフィードから content を返すために使用されるクエリ。クエリの構文はフィードの構造によって異なります。<strong>content</strong> を取得するには、適切なクエリを作成する必要があります。JSONフィードの場合は、クエリ構文に<a href="https://github.com/jayway/JsonPath">Jayway JsonPath構文</a>を使用します。XMLフィードの場合は、<a href="http://www.w3schools.com/xsl/xpath_syntax.asp">XPath式</a>を使用します。詳細については、「<a href="#queryparameter">queryパラメータ</a>」を参照してください。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">queryResultType</code></p>
          </td>
<td>
            <p>(<code class="highlighter-rouge">query</code>パラメータで指定された) クエリの結果で文字列のリストが返された場合は、この<code class="highlighter-rouge">queryResultType</code>パラメータを追加して<code class="highlighter-rouge">[]$</code>に設定します。クエリの結果がオブジェクト (マップ) の場合は、このパラメータを省略してください(Fire App Builderは、JavaのHashMapにオブジェクトをプッシュする必要があるため、結果のタイプを認識する必要があります)。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">matchList</code></p>
          </td>
<td>
            <p><code class="highlighter-rouge">query</code>パラメータで定義されたクエリによって結果が返されます。この結果では、フィードの名前が、Fire App Builderがコンテンツモデルで使用する名前にマップされている必要があります。<code class="highlighter-rouge">matchList</code>パラメータは、クエリの結果をFire App Builderのメディアカテゴリ用の名前にマップするためのパラメータです。詳細については、「<a href="#matchlistparameter">matchListパラメータ</a>」を参照してください。</p>
          </td>
</tr>
</tbody>
</table>
  </li>
</ol>

<h3 id="queryparameter">queryパラメータ</h3>

<p>JSONフィードの構文は、XMLフィードとはかなり異なります。そのため、以降のセクションでは、この 2 つの形式を個別に説明します。</p>

<ul>
  <li><a href="#queryjson">JSONフィード</a></li>
  <li><a href="#queryxml">XMLフィード</a></li>
</ul>

<div class="alert alert-success" role="alert"><i class="fa fa-check-square-o"></i> <b>Tip:</b> このセクションで取り上げる<code class="highlighter-rouge">query</code>構文は、少し複雑に見えるかもしれませんが、Fire App Builderでは、どのようなフィード構造も使用でき、特定の順序や仕様 (メディアRSSなど) に制限されることがありません。このように柔軟性が高いため、フィード内の要素をターゲットに指定する際には高度なクエリ構文を使用する必要があります。</div>

<h4 id="queryjson">JSONフィード</h4>

<p>Fire App Builderのサンプルアプリでは、<code class="highlighter-rouge">query</code>の値は<code class="highlighter-rouge">$[?(@.categories[0] in [$$par0$$])]</code>になっています。カテゴリレシピの<code class="highlighter-rouge">query</code>パラメータと同様、これは (大部分が) <a href="https://github.com/jayway/JsonPath">Jayway JsonPath</a>構文です。この構文では、<a href="https://github.com/jayway/JsonPath#filter-operators">Jayway JsonPathフィルター演算子</a>を使用して、位置 0 に 1 つ以上のアイテムがある<code class="highlighter-rouge">categories</code>配列内のアイテムを選択します。</p>

<p>このクエリは、使用するフィード構文に合わせてカスタマイズする必要があります。そのため、前の手順に戻って、この構文についてもう少し詳しく見てみましょう。サンプルの<a href="http://www.lightcast.com/api/firetv/channels.php?app_id=263&amp;app_key=4rghy65dcsqa&amp;action=channels_videos">Lightcastフィード</a> (Fire App Builderのサンプルアプリで使用されるフィード) は、次のような構造になっています。</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"136211"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Legends Beach Resort, Negril Jamaica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Legends Beach Resort, Negril Jamaica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"538"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"thumbURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l3.cdn01.net\/_thumbs\/0000136\/0136211\/0136211__009f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"imgURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l3.cdn01.net\/_thumbs\/0000136\/0136211\/0136211__009f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"videoURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/media.cdn01.net\/802E1F\/process\/encoded\/video_1880k\/0000136\/0136211\/M3FA8J1MI.mp4?source=firetv&amp;channel_id=13671"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"Jamaican Attractions"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13671"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"136216"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby "</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"1813"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"thumbURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l4.cdn01.net\/_thumbs\/0000136\/0136216\/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"imgURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l4.cdn01.net\/_thumbs\/0000136\/0136216\/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"videoURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/media.cdn01.net\/802E1F\/process\/encoded\/video_1880k\/0000136\/0136216\/L2XGJI1LM.mp4?source=firetv&amp;channel_id=13672"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"The Country Jamaica"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13672"</span><span class="w">
  </span><span class="p">},</span><span class="w">
  </span><span class="p">{</span><span class="w">
    </span><span class="nt">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"136209"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rafting on the Rio Grande River, Jamaica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"description"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Rafting on the Rio Grande River, Jamaica"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"duration"</span><span class="p">:</span><span class="w"> </span><span class="s2">"660"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"thumbURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l1.cdn01.net\/_thumbs\/0000136\/0136209\/0136209__010f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"imgURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/l1.cdn01.net\/_thumbs\/0000136\/0136209\/0136209__010f.jpg"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"videoURL"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http:\/\/media.cdn01.net\/802E1F\/process\/encoded\/video_1880k\/0000136\/0136209\/I9BDFF0IM.mp4?source=firetv&amp;channel_id=13671"</span><span class="p">,</span><span class="w">
    </span><span class="nt">"categories"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
      </span><span class="s2">"Jamaican Attractions"</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nt">"channel_id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"13671"</span><span class="w">
  </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<p>(これは完全なフィードではなく、繰り返しの構造部分を示しています。)</p>

<p>このフィードを<a href="http://jsonpath.herokuapp.com/">Jayway JsonPath Evaluator</a>に挿入します。続いて、次のクエリを実行します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$[?(@.categories in ["The Country Jamaica"]")]
</code></pre>
</div>

<p>このクエリにより、次の内容が返されます。</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"136216"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby "</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"duration"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1813"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"thumbURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l4.cdn01.net/_thumbs/0000136/0136216/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"imgURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l4.cdn01.net/_thumbs/0000136/0136216/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"videoURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://media.cdn01.net/802E1F/process/encoded/video_1880k/0000136/0136216/L2XGJI1LM.mp4?source=firetv&amp;channel_id=13672"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"The Country Jamaica"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"channel_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"13672"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<p>このクエリ構文で取得される内容を次に示します。</p>

<table>
  <thead>
    <tr>
      <th>クエリ構文</th>
      <th>照合する対象</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">$[</code></td>
      <td>ルートで開始し、名前のない配列を選択します。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">?(@.categories[0] in ["The Country Jamaica"]</code></td>
      <td>インデックス位置 <code class="highlighter-rouge">0</code> に <code class="highlighter-rouge">["The Country Jamaica"]</code> が含まれるすべての<code class="highlighter-rouge">categories</code>配列を取得するためのフィルターを作成します。</td>
    </tr>
  </tbody>
</table>

<p>Fire App Builderのサンプルアプリで使用されているクエリ構文には、1 つの相違点があります。<code class="highlighter-rouge">query</code>パラメータでは、<code class="highlighter-rouge">["The Country Jamaica"]</code> ではなく、<code class="highlighter-rouge">$$par0$$</code>が使用されます。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"query": "$[?(@.categories[0] in [$$par0$$])]"
</code></pre>
</div>

<p><code class="highlighter-rouge">$$par0$$</code>は、Fire App Builderに定義されている変数で、クエリによって取得されたすべてのアイテムが格納されます。この点がJayway JsonPath構文と異なっています。このコードでは、実際には、カテゴリレシピの<code class="highlighter-rouge">keyDataType</code>によって、<code class="highlighter-rouge">$par0$$</code>変数にカテゴリが設定されます。</p>

<p>もう 1 つ例を見てみましょう。JSONの内容が次のようになっているとします。</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nt">"titles"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nt">"video"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"reference"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jess"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Video title 1"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.95</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"history"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"John"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Video title 2"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">2.99</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Dave"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Video title 3"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">8.99</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="p">{</span><span class="w">
                </span><span class="nt">"category"</span><span class="p">:</span><span class="w"> </span><span class="s2">"science"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"publisher"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Jess"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Video title 4"</span><span class="p">,</span><span class="w">
                </span><span class="nt">"price"</span><span class="p">:</span><span class="w"> </span><span class="mf">3.99</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">]</span><span class="w">
     </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>カテゴリとして<code class="highlighter-rouge">science</code>が含まれた配列をすべて選択するには、次のクエリを使用します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$.titles.video[?(@.category contains "science")]
</code></pre>
</div>

<p>これにより、次の内容が返されます。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
   {
      "category" : "science",
      "publisher" : "Jess",
      "title" : "Video title 4",
      "price" : 3.99
   }
]
</code></pre>
</div>

<p>ただし、ここでは<code class="highlighter-rouge">category</code>が含まれた配列内の<em>すべての</em>アイテムが必要であるため、<code class="highlighter-rouge">@.category</code>に関する条件を削除します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$.titles.video[?(@.category)]
</code></pre>
</div>

<p>これに<code class="highlighter-rouge">in [$$par0$$]</code>変数を追加します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$.titles.video[?(@.category in [$$par0$$])]
</code></pre>
</div>

<p>要約を次に示します。</p>

<table>
  <thead>
    <tr>
      <th>クエリ構文</th>
      <th>照合する対象</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">$.titles.video[</code></td>
      <td><code class="highlighter-rouge">title</code>オブジェクトと<code class="highlighter-rouge">video</code>配列を選択します。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">?(@.category in [$$par0$$]</code></td>
      <td><code class="highlighter-rouge">category</code>が含まれるすべてのアイテムに一致するよう配列をフィルタリングします。</td>
    </tr>
  </tbody>
</table>

<p>Jayway JsonPath Evaluatorでは「in <code class="highlighter-rouge">[$$par0$$]</code>」を追加しても解釈されません。この構文はJayway JsonPathにはなく、Fire App Builderに固有のものであるためです。</p>

<p>クエリは、使用するフィードや、コンテンツオブジェクトのマッチングに必要な構文によって異なります。たとえば、より複雑なクエリは次のようになります。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>$.assets[?(@.type == 'movie.Container' &amp;&amp; @.assetId in $$par0$$)]
</code></pre>
</div>

<p>このクエリでは、ルート (<code class="highlighter-rouge">$</code>) で開始し、1 つ目のディレクトリレベル (<code class="highlighter-rouge">.</code>) で<code class="highlighter-rouge">assets</code>という名前のオブジェクトを検索し、配列をフィルタリングして、<code class="highlighter-rouge">movie.Container</code>と等しく<code class="highlighter-rouge">assetId</code>要素が含まれた<code class="highlighter-rouge">type</code>オブジェクトを取得するように指定されています。</p>

<h4 id="queryxml">XMLフィード</h4>

<p>フィードがXMLの場合は、Jayway JsonPathを使用する代わりに、<a href="http://www.w3schools.com/xsl/xpath_syntax.asp">XPath式</a>を使用して、フィードの各要素をターゲットにする必要があります。XPathでは、XML文書が “ノード” と呼ばれるさまざまなアイテムを用いた構造に変換されます。XPath構文は各ノードの位置を特定するための構文です。</p>

<p>Jayway JsonPath構文とは異なり、XMLフィードの構文は、はるかにシンプルです。</p>

<p>フィードの内容が次のようになっているとします。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;rss&gt;</span>
    <span class="nt">&lt;channel&gt;</span>
        <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>Sample Title 1<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>Wed, 26 Oct 2016 20:34:22 PDT<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>https://example.com/myshow/episodes/110<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;author&gt;</span>Sample Author name<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;category&gt;</span>Gadgets<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/item&gt;</span>
        
        <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>Sample Title 2<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>Mon, 24 Oct 2016 09:24:12 PDT<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>https://example.com/myshow/episodes/109<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;author&gt;</span>Sample Author name<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;category&gt;</span>Technology<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</code></pre>
</div>

<p>コンテンツに対する<code class="highlighter-rouge">query</code>は、次のようになります。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//item
</code></pre>
</div>

<p>XPathの場合、<code class="highlighter-rouge">//item</code>は、XML構造内の位置にかかわらず、<code class="highlighter-rouge">item</code>要素のすべてのインスタンスに一致します(XMLでは、<code class="highlighter-rouge">[$$par0$$]</code> は不要です)。</p>

<p>XPathクエリの作成方法の詳細については、「<a href="fire-app-builder-querying-xml.html">XMLでクエリを実行する</a>」を参照してください。</p>

<h3 id="matchlistparameter">matchListパラメータ</h3>

<p><code class="highlighter-rouge">matchList</code>パラメータは、クエリの結果から特定のプロパティを選択して、Fire App Builderのコンテンツモデルにマップします。<code class="highlighter-rouge">matchList</code>で使用される構文は、特定の要素をターゲットにするカスタムのFire App Builder構文です。</p>

<p>Fire App Builderのサンプルアプリの場合、コンテンツレシピの値は、タイトル、ID、説明、メディア、および画像をFire App Builderのコンテンツモデルにマップするプロパティマッピングの配列です。サンプルアプリの<code class="highlighter-rouge">matchlist</code>パラメータの記述内容を次に示します。</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"title@title"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id@id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description@description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"videoURL@url"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"imgURL@cardImageUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"imgURL@backgroundImageUrl"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span></code></pre>
</div>

<p>この構文の構成は次のとおりです。アンパサンド (<code class="highlighter-rouge">@</code>) の左側に、クエリの結果でターゲットにするプロパティを設定します (<code class="highlighter-rouge">title</code>など)。アンパサンド (<code class="highlighter-rouge">@</code>) の右側には、プロパティのマップ先となるFire App Builder要素を設定します (<code class="highlighter-rouge">title</code>など)。</p>

<p>次の表は、フィードのプロパティまたは要素をマップできるFire App Builderの要素を示しています。</p>

<table>
<colgroup>
<col width="20%" />
<col width="60%" />
<col width="20%" />
</colgroup>
<thead>
<tr class="header">
<th>Fire App Builderでの名前</th>
<th>説明</th>
<th>必須か</th>
</tr>
</thead>
<tbody>
<tr>
<td>
        <p><code class="highlighter-rouge">title</code></p>
      </td>
<td>
        <p>ビデオのタイトル。</p>
      </td>
<td>
        <p>必須</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">id</code></p>
      </td>
<td>
        <p>ビデオID。メディアオブジェクトを一意に識別するために使用されます。</p>
      </td>
<td>
        <p>必須</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">subtitle</code></p>
      </td>
<td>
        <p>ビデオの字幕。</p>
      </td>
<td>
        <p>省略可能</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">description</code></p>
      </td>
<td>
        <p>ビデオの説明。</p>
      </td>
<td>
        <p>必須</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">url</code></p>
      </td>
<td>
        <p>ビデオへのリンク。</p>
      </td>
<td>
        <p>必須</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">cardImageUrl</code></p>
      </td>
<td>
        <p>ホーム画面で他のメディアサムネイルの隣に表示される画像サムネイル。最適なサイズは、548px x 452pxです。詳細については、下の「<a href="#imageresolution">画像の解像度</a>」セクションを参照してください。</p>
      </td>
<td>
        <p>必須</p>
      </td>
</tr>

<tr>
<td>
        <p><code class="highlighter-rouge">backgroundImageUrl</code></p>
      </td>
<td>
        <p>メディアを選択したときに表示される大きな画像。最適なサイズは、1920px x 1080pxです。詳細については、下の「<a href="#imageresolution">画像の解像度</a>」セクションを参照してください。&lt;/td&gt;</p>
        <td>
          <p>必須</p>
        </td>
        <p>&lt;/tr&gt;</p>

        <tr>
<td>
            <p><code class="highlighter-rouge">tags</code></p>
          </td>
<td>
            <p>お勧めのコンテンツを関連付けるために使用されます。詳細については、「<a href="#tags">お勧めのコンテンツ (タグを使用)</a>」を参照してください。</p>
          </td>
<td>
            <p>省略可能</p>
          </td>
</tr>

        <tr>
<td>
            <p><code class="highlighter-rouge">live</code></p>
          </td>
<td>
            <p>ライブストリームコンテンツを識別するために使用されます。ライブストリームコンテンツの場合、ユーザーが見終わってメディアに戻ったときに [Watch from Beginning] ボタンは表示されません。詳細については、「<a href="fire-app-builder-live-stream-configuration.html">ライブストリーミングを構成する</a>」を参照してください。</p>
          </td>
<td>
            <p>省略可能</p>
          </td>
</tr>
        <p>&lt;/tbody&gt;
&lt;/table&gt;</p>

        <div class="alert alert-danger" role="alert"><i class="fa fa-exclamation-circle"></i> <b>Warning:</b> Fire App Builderのコンテンツモデルでは、(最低限) フィードの要素をタイトル、ID、説明、URL、カード画像、および背景画像にマップする<em>必要があります</em>。画像が 1 つのみの場合は、カード画像と背景画像の両方を同じ画像にマップできます。</div>

        <p><code class="highlighter-rouge">matchlist</code>パラメータの機能について理解を深めるために、Fire App Builderのサンプルアプリを詳しく見てみましょう。Fire App BuilderのLightCastメディアフィードでは、<code class="highlighter-rouge">query</code>パラメータの選択内容に基づいて、次の内容が返されます。</p>

        <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"136211"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Legends Beach Resort, Negril Jamaica"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Legends Beach Resort, Negril Jamaica"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"duration"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"538"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"thumbURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l3.cdn01.net/_thumbs/0000136/0136211/0136211__009f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"imgURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l3.cdn01.net/_thumbs/0000136/0136211/0136211__009f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"videoURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://media.cdn01.net/802E1F/process/encoded/video_1880k/0000136/0136211/M3FA8J1MI.mp4?source=firetv&amp;channel_id=13671"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"Jamaican Attractions"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"channel_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"13671"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"136216"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby "</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Falmouth Jamaica Nature's Lullaby"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"duration"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"1813"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"thumbURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l4.cdn01.net/_thumbs/0000136/0136216/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"imgURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l4.cdn01.net/_thumbs/0000136/0136216/0136216__001f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"videoURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://media.cdn01.net/802E1F/process/encoded/video_1880k/0000136/0136216/L2XGJI1LM.mp4?source=firetv&amp;channel_id=13672"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"The Country Jamaica"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"channel_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"13672"</span><span class="w">
   </span><span class="p">},</span><span class="w">
   </span><span class="p">{</span><span class="w">
      </span><span class="nt">"id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"136209"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Rafting on the Rio Grande River, Jamaica"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"description"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"Rafting on the Rio Grande River, Jamaica"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"duration"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"660"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"thumbURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l1.cdn01.net/_thumbs/0000136/0136209/0136209__010f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"imgURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://l1.cdn01.net/_thumbs/0000136/0136209/0136209__010f.jpg"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"videoURL"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"http://media.cdn01.net/802E1F/process/encoded/video_1880k/0000136/0136209/I9BDFF0IM.mp4?source=firetv&amp;channel_id=13671"</span><span class="p">,</span><span class="w">
      </span><span class="nt">"categories"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
         </span><span class="s2">"Jamaican Attractions"</span><span class="w">
      </span><span class="p">],</span><span class="w">
      </span><span class="nt">"channel_id"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"13671"</span><span class="w">
   </span><span class="p">}</span><span class="w">
</span><span class="p">]</span><span class="w">
</span></code></pre>
        </div>

        <p><code class="highlighter-rouge">matchList</code>パラメータは、フィードのこれらのプロパティ名を、Fire App Builderのコンテンツモデルで使用される名前に変換します。</p>

        <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="p">[</span><span class="w">
    </span><span class="s2">"title@title"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"id@id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"description@description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"videoURL@url"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"imgURL@cardImageUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"imgURL@backgroundImageUrl"</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span></code></pre>
        </div>

        <ul>
          <li><code class="highlighter-rouge">title@title</code>によって<code class="highlighter-rouge">title</code>が<code class="highlighter-rouge">title</code>に変換されます</li>
          <li><code class="highlighter-rouge">id@id</code>によって<code class="highlighter-rouge">id</code>が<code class="highlighter-rouge">id</code>に変換されます</li>
          <li><code class="highlighter-rouge">description@description</code>によって<code class="highlighter-rouge">description</code>が<code class="highlighter-rouge">description</code>に変換されます</li>
          <li><code class="highlighter-rouge">videoURL@url</code>によって<code class="highlighter-rouge">videoURL</code> が<code class="highlighter-rouge">url</code>に変換されます</li>
          <li><code class="highlighter-rouge">imgURL@cardImageUrl</code>によって<code class="highlighter-rouge">imgURL</code>が<code class="highlighter-rouge">cardImageUrl</code>に変換されます</li>
          <li><code class="highlighter-rouge">imgURL@backgroundImageUrl</code>によって<code class="highlighter-rouge">imgURL</code>が<code class="highlighter-rouge">backgroundImageUrl</code>に変換されます</li>
        </ul>

        <p>(この例では多くの名前が変換前後で同じですが、フィードによっては<code class="highlighter-rouge">videoTitle</code>や<code class="highlighter-rouge">videoSummary</code>などの語が含まれている場合があります。)</p>

        <p>アンパサンド<code class="highlighter-rouge">@</code>の左側を、使用するフィードの用語に一致するようカスタマイズします。<code class="highlighter-rouge">@</code>の右側は、Fire App Builderのコンテンツモデルの用語に一致するようカスタマイズします。</p>

        <p>使用するフィードによっては各要素が単純なキーと値のペアのリストになっていない場合があります。複数のレベルで入れ子になっている場合、<code class="highlighter-rouge">matchList</code>は、次のようになります。</p>

        <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">    </span><span class="s2">"common/title@title"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"assetId@id"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"common/subtitle@subtitle"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"common/description@description"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"video/videoURL@url"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"imgURLs/ImageSmall@cardImageUrl"</span><span class="err">,</span><span class="w">
    </span><span class="s2">"imgURLs/ImageLarge@backgroundImageUrl"</span><span class="w">
</span></code></pre>
        </div>

        <p>この構文では、各レベルの要素がスラッシュ (<code class="highlighter-rouge">/</code>) によって区切られています。たとえば、<code class="highlighter-rouge">common/title</code>は、<code class="highlighter-rouge">common</code>オブジェクトの内部を調べて<code class="highlighter-rouge">title</code>プロパティに対応させます。</p>

        <p>XMLを使用する例を見てみましょう。XMLフィードの内容が次のようになっているとします。</p>

        <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0" encoding="utf-8"?&gt;</span>
<span class="nt">&lt;rss</span> <span class="na">version=</span><span class="s">"2.0"</span> <span class="err">…</span> <span class="err">…</span><span class="nt">&gt;</span>
  <span class="nt">&lt;channel&gt;</span>
    <span class="nt">&lt;title&gt;</span>Content Mix for US News-in-Pictures 9x16<span class="nt">&lt;/title&gt;</span>
    <span class="nt">&lt;description&gt;</span>Screenfeed Content Server<span class="nt">&lt;/description&gt;</span>
    <span class="nt">&lt;lastBuildDate&gt;</span>Mon, 08 Dec 2014 22:55:16 GMT<span class="nt">&lt;/lastBuildDate&gt;</span>
<span class="nt">&lt;ttl&gt;</span>5<span class="nt">&lt;/ttl&gt;</span>
 
    <span class="nt">&lt;item&gt;</span>
      <span class="nt">&lt;title&gt;</span>John Anderson ……<span class="nt">&lt;/title&gt;</span>
      <span class="nt">&lt;guid</span> <span class="na">isPermaLink=</span><span class="s">"false"</span><span class="nt">&gt;</span>1<span class="nt">&lt;/guid&gt;</span>
      <span class="nt">&lt;pubDate&gt;</span>Mon, 08 Dec 2014 22:55:16 GMT<span class="nt">&lt;/pubDate&gt;</span>
      <span class="nt">&lt;category&gt;</span>News<span class="nt">&lt;/category&gt;</span>
      <span class="nt">&lt;media:content</span> <span class="na">url=</span><span class="s">"http://samples.screenfeed.com/1.jpg"</span> <span class="na">type=</span><span class="s">"image/jpeg"</span><span class="nt">&gt;</span>
        <span class="nt">&lt;media:title</span> <span class="na">type=</span><span class="s">"plain"</span><span class="nt">&gt;</span>1080x1920 - English - with caption<span class="nt">&lt;/media:title&gt;</span>
        <span class="nt">&lt;media:credit&gt;</span>Â© 2014 News Agency<span class="nt">&lt;/media:credit&gt;</span>
        <span class="nt">&lt;media:thumbnail</span> <span class="na">url=</span><span class="s">"http://samples.screenfeed.com/public/us-news-in-pictures/1080x1920/h9xnRIN9CUGiTWNQBBrjOw-1080x1920h-1.jpg"</span> <span class="nt">/&gt;</span>
      <span class="nt">&lt;/media:content&gt;</span>
<span class="nt">&lt;/item&gt;</span>
 
...

  <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</code></pre>
        </div>

        <p>コンテンツを取得するための<code class="highlighter-rouge">matchList</code>パラメータのクエリは次のようになります。</p>

        <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="w">  </span><span class="s2">"matchList"</span><span class="err">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"title/#text@title"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"guid/#text@id"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"media:content/media:title/#text@description"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"media:content/#attributes/url@url"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"media:content/#attributes/url@cardImageUrl"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"media:content/#attributes/url@backgroundImageUrl"</span><span class="p">,</span><span class="w">
  </span><span class="p">]</span><span class="w">
</span></code></pre>
        </div>

        <p>この場合、変換は次のように実行されます。</p>

        <ul>
          <li><code class="highlighter-rouge">title/#text@mTitle</code>によって<code class="highlighter-rouge">title/#text</code>が<code class="highlighter-rouge">title</code>に変換されます。</li>
          <li><code class="highlighter-rouge">guid/#text@mId</code>によって<code class="highlighter-rouge">guid/#text</code>が<code class="highlighter-rouge">id</code>に変換されます。</li>
          <li><code class="highlighter-rouge">media:content/media:title/#text@mDescription</code>によって<code class="highlighter-rouge">media:content/media:title/#text</code>が<code class="highlighter-rouge">description</code>に変換されます。</li>
          <li><code class="highlighter-rouge">media:content/#attributes/url@mUr</code>によって<code class="highlighter-rouge">media:content/#attributes/url</code>が<code class="highlighter-rouge">url</code>に変換されます。</li>
          <li><code class="highlighter-rouge">media:content/#attributes/url@mCardImageUrl</code>によって<code class="highlighter-rouge">media:content/#attributes/url</code>が<code class="highlighter-rouge">cardImageUrl</code>に変換されます。</li>
          <li><code class="highlighter-rouge">media:content/#attributes/url@mBackgroundImageUrl</code>によって<code class="highlighter-rouge">media:content/#attributes/url</code>が<code class="highlighter-rouge">backgroundImageUrl</code>に変換されます。</li>
        </ul>

        <p>実際には、<code class="highlighter-rouge">#text</code>セレクターを使用している点のみが異なっています。<code class="highlighter-rouge">#text</code>セレクターによって要素内のテキストがターゲットに指定されています。<code class="highlighter-rouge">#text</code>構文は、カスタムのFire App Builder構文で、XPathの<code class="highlighter-rouge">text()</code> に相当します。</p>

        <p>別の例を次に示します。フィードの内容が次のようになっているとします。</p>

        <div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;rss&gt;</span>
    <span class="nt">&lt;channel&gt;</span>
        <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>Sample Title 1<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>Wed, 26 Oct 2016 20:34:22 PDT<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>https://example.com/myshow/episodes/110<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;author&gt;</span>Sample Author name 1<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;category&gt;</span>Technology<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;category&gt;</span>Gadgets<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/item&gt;</span>
        
        <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>Sample Title 2<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>Wed, 23 Oct 2016 08:33:12 PDT<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>https://example.com/myshow/episodes/109<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;author&gt;</span>Sample Author name 2<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;category&gt;</span>News<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</code></pre>
        </div>

        <p><code class="highlighter-rouge">matchlist</code>パラメータの内容は次のようになります。</p>

        <div class="highlighter-rouge"><pre class="highlight"><code>"matchList": [
    "title/#text@title",
    "guid/#text@id",
    "itunes:subtitle/#text@description",
    "media:content/#attributes/url@url",
    "media:content/media:thumbnail/#attributes/url@cardImageUrl",
    "media:content/media:thumbnail/#attributes/url@backgroundImageUrl"
]
</code></pre>
        </div>

        <h4 id="imageresolution">画像の解像度</h4>

        <p>アプリのメディアには、画像カードと背景画像という 2 つの画像を使用できます。この 2 種類の画像は異なる場所で使用され、各画像が使用されるコンテナも少し異なります。</p>

        <p>次のスクリーンショットは、[Content Home] 画面における 2 つの画像の違いを示しています。</p>

        <figure><img class="docimage " src="docs_ja/firetv/fireappbuilder/images/fireappbuilder_home.png" alt="" /><figcaption>画像カードは、サムネイルのリストに表示されます。画像カードの 1 つを選択すると、画面右上の領域に大きい背景画像が表示されます。</figcaption></figure>

        <p>この 2 つの画像は、[Content Preview] 画面にも表示されます。</p>

        <figure><img class="docimage " src="docs_ja/firetv/fireappbuilder/images/fireappbuilder_imagesdemoscreen2.png" alt="" /><figcaption>この画面では、画像カードが少し大きく表示され、背景画像が画面の背景全体に表示されています。背景画像は、ダークグレイでオーバーレイされます。</figcaption></figure>

        <p>推奨の画像サイズ (幅x高さ) は次のとおりです。</p>

        <ul>
          <li><strong>画像カード</strong>: 548px x 452px。もっと大きい画像も使用できますが、縮小されます。画像がトリミングされて 320px x 240pxのコンテナに格納される場合もあります。</li>
          <li><strong>背景画像</strong>: 1920px x 1080px。もっと大きい画像も使用できますが、縮小されます。画像がトリミングされて 1120px x 800pxのコンテナに格納される場合もあります。</li>
        </ul>

        <p>Fire App Builderによって画像がトリミングされる場合は、アスペクト比を維持するために、画像の両端がトリミングされます (中心がフォーカスされます)。</p>

        <h4 id="tags">お勧めのコンテンツ (タグを使用)</h4>

        <p>ビデオの下には [Recommended Content] セクションがあり、同じタグを持つ他のビデオが表示されます。</p>

        <figure><img class="docimage " src="docs_ja/firetv/fireappbuilder/images/fireappbuilder_recommendedcontentdiagram.png" alt="お勧めのコンテンツ" /></figure>

        <p><a href="fire-app-builder-customize-look-and-feel.html#recommendations">アプリの [Recommended Content] セクション</a>にコンテンツを追加するには、<code class="highlighter-rouge">matchList</code>パラメータでタグを対応させる必要があります。たとえば、次のように指定します。</p>

        <div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="err">common/tags@tags</span><span class="w">
</span></code></pre>
        </div>

        <p>ここでは、<code class="highlighter-rouge">tags</code>要素が<code class="highlighter-rouge">common</code>要素の内部にあります。この構文によって<code class="highlighter-rouge">common/tags</code>が<code class="highlighter-rouge">tags</code>に変換されます。これにより、Fire App Builderは<code class="highlighter-rouge">tags</code>を読み取って、関連するメディアオブジェクトを表示できます。</p>

        <p>Fire App BuilderのサンプルアプリのLightCastフィードには、タグが含まれていないことに注意してください。お勧めのコンテンツを表示したいが、フィードにタグが含まれていない場合は、フォールバックパラメータを<code class="highlighter-rouge">true</code>に設定してください。</p>

        <p>(アプリの<strong>assets</strong>フォルダーにある) Navigator.jsonファイルには、<code class="highlighter-rouge">config</code>オブジェクトに<code class="highlighter-rouge">categoryDefaultRecommendation</code>という名前のプロパティが含まれています。</p>

        <pre>
  "config": {
    <span class="red">"showRecommendedContent": true</span>,
    "categoryDefaultRecommendation": true,
    "searchAlgo": "basic"
  }
</pre>

        <p>この<code class="highlighter-rouge">categoryDefaultRecommendation</code>を<code class="highlighter-rouge">true</code>に設定すると、Fire App Builderでは、(同じタグを持つコンテンツを取得する代わりに) 同じカテゴリの他のメディアアセットをお勧めのコンテンツとして使用します。</p>

        <div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> 現時点では、多くのアイテムに同じタグが付けられている場合、(フィードのタグに基づいて行われる) お勧めコンテンツのマッチングにおいて、コンテンツが無制限にマッチングされます。これは既知の制限/バグです。</div>

        <p>[Recommended Content] セクションを非表示にするには、Navigator.jsonで<code class="highlighter-rouge">showRecommendedContent</code>をfalseに設定します。</p>

        <h2 id="section">次のステップ</h2>

        <p>アプリのメディアフィードのカテゴリとコンテンツを構成できたところで、続いては、フィードをアプリのUIに関連付ける必要があります。「<a href="fire-app-builder-configure-navigator.html">Navigatorの構成の概要</a>」を参照してください。</p>

        <!-- common links -->

      </td></tr></tbody></table>

                    <div class="toc-main-column">
                        

                    </div>

            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
                <!--<li><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> </li><li> <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a></li><li>Fire App Builder</li>-->
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, and more. </p>
                <p><i class="fa fa-map-pin"></i> 1120 Enterprise Way, Sunnyvale, California</p>
                <p><i class="fa fa-envelope"></i> E-mail : someemail@amazon.com</p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a href="#"> Doc index</a></li>
                    <li><a href="#"> Blog</a></li>
                    <li><a href="#"> Developer.amazon.com</a></li>
                    <li><a href="#"> AWS docs</a></li>
                    <li><a href="#"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li><a href="#">Developer.amazon.com blog</a></li>
                    <li><a href="#">AWS blog</a></li>
                    <li><a href="#">Amazon newsroom</a></li>
                    <li><a href="#">Other Amazon blogs</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li><a href="#">Amazon Underground</a></li>
                    <li><a href="#">General Android</a></li>
                    <li><a href="#">Amazon Dash Replenishment</a></li>
                    <li><a href="#">Merch by Amazon</a></li>
                    <li><a href="#">Alexa</a></li>
                    <li><a href="#">Amazon Fire Devices</a></li>
                    <li><a href="#">Appstore</a></li>
                    <li><a href="#">Mobile APIs and Services</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-6">
            <p>© 2017 -  Amazon</p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
                <li><a href="#">About us</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Faq's</a></li>
                <li><a href="#">Contact us</a></li>
                <li><a href="#">Site Map</a></li>
            </ul>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->





</body>

</html>
