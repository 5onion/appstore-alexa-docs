<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Fire App Builder Set Up Recipes Categories | Fire App Builder</title>
    <base target="_self">
    <meta name="description" content="ここでは、フィードにカテゴリを問い合わせる手順を説明します。カテゴリを使用すると、メディアをさまざまなコレクションやチャネルにグループ化できます。カテゴリでメディアを整理すれば、すべてのビデオを 1 つの長いリストで保持せずに済みます。レシピ構成の全般的な概要については、「レシピ構成の概要」を参照してください。  カテゴリレシピを構成する  queryパラメータ{#queryparameter}  JSONフィード XMLフィード{#categoryxml}   matchListパラメータ keyDataTypeパラメータ  ... " />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="google" value="notranslate">
    <link rel="icon"  type="image/x-icon" href="favicon.ico">


    <!-- Load sidebar component -->
    <link rel="stylesheet" type="text/css" href="assets/css/font-awesome.min.css">
    <script type="text/javascript" src="assets/js/jquery.min.js"></script>
    <!-- Load jquery.cookie plugin (optional) -->
    <script type="text/javascript" src="assets/js/jquery.cookie.min.js"></script>
    <!-- Load jquery.navgoco plugin js and css files -->
    <script type="text/javascript" src="assets/js/jquery.navgoco.min.js"></script>

    <script src="assets/js/bootstrap.min.js"></script>
    <script src="assets/js/toc.js"></script>
    <script src="assets/js/anchor.min.js"></script>



    <script>
        $( document ).ready(function() {
            $("#docnavsidebar").navgoco({
                caretHtml: '',
                accordion: false,
                openClass: 'open', // open
                save: true,
                cookie: {
                    name: 'navgoco',
                    expires: false,
                    path: '/'
                },
                slide: {
                    duration: 300,
                    easing: 'swing'
                }
            });
            $("#collapseAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', false);
            });

            $("#expandAll").click(function(e) {
                e.preventDefault();
                $("#docnavsidebar").navgoco('toggle', true);
            });
        });

    </script>
    <script src="assets/js/customscripts.js"></script>

    <script>
        $(document).ready(function() {
            $('[data-toggle=offcanvas]').click(function() {
                $('.row-offcanvas').toggleClass('active');
            });
        });
    </script>


    <!--stylesheets / link tags loaded here-->

    <link rel="stylesheet" href="assets/css/bootstrap.min.css" />

    <link rel="stylesheet" href="assets/css/main.css" />
    <style>
        ul#markdown-toc::before  {
        content: "目次"
         }
    </style>

</head>
<body class="default">
<div class="page-container">


    <!-- Top Navigation -->
    <nav class="navbar navbar-default navbar-fixed-top">
        <div class="container topnavlinks">
            <div class="navbar-header">
                <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1">
                    <span class="sr-only">Toggle topnav</span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <button type="button" class="navbar-toggle toggle-sidebar-button"  data-toggle="offcanvas" data-target=".sidebar-nav">
                    <span class="sr-only">Toggle sidebar</span>
                    <span class="sidebarToggle fa fa-columns fa-2x"></span>
                </button>

                <a class="navbar-brand noCrossRef" href="/">
                    <img class="navbar-logo" src="amazonlogowhite.png"/>
            </div>

            <div class="collapse navbar-collapse" id="bs-example-navbar-collapse-1">
                <ul class="nav navbar-nav navbar-left">

                    <!-- single item nav items appear here -->

                    
                    
                    
                    
                    <li><a href="https://developer.amazon.com/support" class="noCrossRef">サポート</a></li>
                    
                    
                    
                    <li><a href="https://developer.amazon.com/blogs" class="noCrossRef">ブログ</a></li>
                    
                    
                    

                    <!-- drop-down nav items appear here -->

                    



                </ul>

                <ul class="nav navbar-nav navbar-right">
                    <li>
                        <!--start search -->
                        <!--
                        <div id="search-demo-container">
                            <form action="search.html" method="get">
                                <input type="text" id="search-input" placeholder="グローバル検索 ..." name="query">
                            </form>
                        </div>
                        -->
                        <!-- end search-->
                    </li>
                </ul>
            </div>

        </div>

        <!--<div class="navbarbottom">-->
        <!--<div class="container">-->
        <!--

-->
        <!--</div>-->
        <!--</div>-->
        <!-- /.container -->
    </nav>


<div class="container">
        <div class="row row-offcanvas row-offcanvas-left">

            <!-- sidebar -->
            <div class="col-xs-6 col-sm-3 sidebar-offcanvas" id="sidebar" role="navigation">

                


<div class="mydocsidebar">
<div class="sidebar-inner">
<!-- search bar -->

<div class="sidebarSearchBar">
<form action="search-fireappbuilder_ja.html" method="get">
  <div class="input-group search">
    <input type="text" id="search-box" name="query" class="form-control" placeholder="製品検索 ...">
    <div class="input-group-btn">
      <button class="btn btn-default" type="submit" value="search">
        <i class="glyphicon glyphicon-search"></i>
      </button>
    </div>
  </div>
</form>
</div>

<!-- end search bar -->


<div class="productTitle">Fire App Builder</div>
<p class="external">
    <a href="#" id="collapseAll">すべてを折りたたむ</a> | <a href="#" id="expandAll">すべて展開</a>
</p>



    <ul id="docnavsidebar" class="docnav">
    
    <li class="level1"><a href="#">Introduction</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-overview.html">Fire App Builder: JavaベースのAmazon Fire TVおよびAndroidアプリ向けスターターキット</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-release-notes.html">リリースノート</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-end-to-end-process.html">アプリを作成するための一連のプロセス</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-questions-and-answers.html">よくある質問</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">1. Get Set Up</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-download-and-build.html">Fire App Builderをダウンロードして、アプリをビルドする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-connecting-adb-to-fire-tv.html">ADBを使用してFire TVに接続する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-app-tour.html">アプリの概要</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">2. Configure Your Feed</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-load-media-feed.html">メディアフィードをロードする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-overview.html">レシピ構成の概要</a></li>
            
            

            

            

            
            
            <li class="level1items open"><a href="fire-app-builder-set-up-recipes-categories.html">カテゴリレシピをセットアップする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-set-up-recipes-content.html">コンテンツレシピをセットアップする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator.html">Navigatorの構成の概要</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-token-feeds.html">Navigatorの構成 -- トークンベースフィード</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-configure-navigator-open-feeds.html">Navigatorの構成 -- オープンフィード</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">3. Customize the Appearance</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-customize-look-and-feel.html">アプリのルックアンドフィールをカスタマイズする</a></li>
            
            

            

            
        </ul>

        
    <li class="level1"><a href="#">4. Add Components</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-interfaces-and-components.html">コンポーネントの概要</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-load-a-component.html">アプリにコンポーネントをロードする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-create-a-new-component.html">新しいFire App Builderコンポーネントを作成する</a></li>
            
            

            

            <li class="level2"><a class="subfoldersTitle" href="#">Ads components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-freewheel-ads-component.html">Freewheel広告コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-vast-ads-component.html">VAST広告コンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Analytics components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-crashlytics-component.html">Crashlyticsコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-flurry-analytics-component.html">Flurry Analyticsコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-google-analytics-component.html">Googleアナリティクスコンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-omniture-analytics-component.html">Omniture Analyticsコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Authorization components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-adobe-pass-auth-component.html">Adobe Pass認証コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-facebook-auth-component.html">Facebook認証コンポーネント</a></li>
                    
                    

                    

                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-login-with-amazon-component.html">Login with Amazonコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Purchasing components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-in-app-purchase-component.html">Amazonアプリ内課金のコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            <li class="level2"><a class="subfoldersTitle" href="#">Media components</a>
                <ul style="display:none;">
                    

                    
                    
                    <li class="level2items"><a href="fire-app-builder-amazon-media-player-component.html">Amazon Media Playerコンポーネント</a></li>
                    
                    

                    

                    
                </ul>
            </li>

            

            
        </ul>

        
    <li class="level1"><a href="#">Other Development Topics</a>
        <ul>
            

            
            
            <li class="level1items"><a href="fire-app-builder-pulling-updates-from-github.html">Githubから更新データをプルする</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-live-stream-configuration.html">ライブストリーミングを構成する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-catalog-integration.html">Fire TVカタログにメディアを組み込む</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-use-an-android-tv-emulator.html">Android TVエミュレーターを使用してアプリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-json.html">JSONでクエリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-querying-xml.html">XMLでクエリを実行する</a></li>
            
            

            

            

            
            
            <li class="level1items"><a href="fire-app-builder-troubleshooting.html">トラブルシューティング</a></li>
            
            

            

            
        </ul>

        

    </li>
</ul>

<hr class="resourceSeparator"></hr>
<div class="relatedResources">その他のリソース</div>
<ul id="entrypages">
        
        <li><a class="noCrossRef" href="/getting-started-developing-apps-and-games-for-amazon-fire-tv.html">Fire TV</a></li>
        
    </li>
</ul>
</div>
</div>
<script>$("li.open").parents('li').toggleClass("open");</script>






            </div>

            <!-- main area -->
            <div class="col-xs-12 col-sm-9 main">
                
                    <div class="subtitle"><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> 自宅</a> > <a href="index.html" class="noCrossRef productSubtitle"> ドキュメンテーション</a> > Fire App Builder > </div>
                    <h1>Fire App Builder Set Up Recipes Categories</h1>

                    

                    <p>ここでは、フィードにカテゴリを問い合わせる手順を説明します。カテゴリを使用すると、メディアをさまざまなコレクションやチャネルにグループ化できます。カテゴリでメディアを整理すれば、すべてのビデオを 1 つの長いリストで保持せずに済みます。レシピ構成の全般的な概要については、「<a href="fire-app-builder-set-up-recipes-overview.html">レシピ構成の概要</a>」を参照してください。</p>

<ul id="markdown-toc">
  <li><a href="#カテゴリレシピを構成する" id="markdown-toc-カテゴリレシピを構成する">カテゴリレシピを構成する</a>    <ul>
      <li><a href="#queryパラメータqueryparameter" id="markdown-toc-queryパラメータqueryparameter">queryパラメータ{#queryparameter}</a>        <ul>
          <li><a href="#categoryjson" id="markdown-toc-categoryjson">JSONフィード</a></li>
          <li><a href="#xmlフィードcategoryxml" id="markdown-toc-xmlフィードcategoryxml">XMLフィード{#categoryxml}</a></li>
        </ul>
      </li>
      <li><a href="#matchlistparameter" id="markdown-toc-matchlistparameter">matchListパラメータ</a></li>
      <li><a href="#keydatatypeparameter" id="markdown-toc-keydatatypeparameter">keyDataTypeパラメータ</a></li>
    </ul>
  </li>
  <li><a href="#カテゴリを持たないフィード" id="markdown-toc-カテゴリを持たないフィード">カテゴリを持たないフィード</a></li>
  <li><a href="#次のステップ" id="markdown-toc-次のステップ">次のステップ</a></li>
</ul>

<h2 id="カテゴリレシピを構成する">カテゴリレシピを構成する</h2>

<ol>
  <li><strong>LightCastCategoriesRecipe.json</strong>ファイル (<strong>app &gt; assets &gt; recipes</strong>にあります) を開きます。</li>
  <li>
    <p>次の表の説明に従って、ファイルの値を構成します。パラメータの詳細な説明が必要な場合は、表の下の各セクションを参照してください。</p>

    <table>
<colgroup>
<col width="20%" />
<col width="80%" />
</colgroup>
<thead>
<tr class="header">
<th>キー</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td>
            <p><code class="highlighter-rouge">cooker</code></p>
          </td>
<td>
            <p>このレシピで定義されたパラメータをどのユーティリティが取得してロジックを実行するかを定義します。つまり、レシピを「料理」するのがcookerです。このパラメータはデフォルト値の<code class="highlighter-rouge">DynamicParser</code>のままにしてください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">format</code></p>
          </td>
<td>
            <p>受信データフィードのデータ形式を指定します。指定できる値は<code class="highlighter-rouge">json</code>または<code class="highlighter-rouge">xml</code>です。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">translator</code></p>
          </td>
<td>
            <p>フィードのオブジェクトをFire App Builderのコンテンツモデルに変換する際にトランスレーションとリフレクションのどちらを使用するかを指定します。トランスレーションの方が高速で、推奨される変換方法です。トランスレーションを使用するには、値をデフォルトの <code class="highlighter-rouge">ContentContainerTranslator</code> のままにします。リフレクションを使用する場合は、<code class="highlighter-rouge">translator</code>パラメータをレシピから完全に削除してください。また、リフレクションを使用するには<code class="highlighter-rouge">matchlist</code>パラメータで使用される名前を変更する必要があるため、「<a href="fire-app-builder-questions-and-answers.html#translator">FAQ</a>」で「How do I use reflection…」という質問を参照してください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">model</code></p>
          </td>
<td>
            <p>データのコンテンツモデルを指定します。コンテンツモデルは、コンテンツの構造を指定し、それをFire App Builder UIにマップするためのものです。これは、デフォルトの<code class="highlighter-rouge">com.amazon.android.model.content.ContentContainer</code>のままにしてください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">modelType</code></p>
          </td>
<td>
            <p>フィードが配列と 1 つのオブジェクトのどちらであるかを指定します。指定できる値は<code class="highlighter-rouge">array</code>または<code class="highlighter-rouge">single</code>です。ほとんどのフィードは<code class="highlighter-rouge">array</code>です。たとえば、JSONフィードが山括弧で囲まれている場合や、XMLフィードに入れ子になった角括弧がある場合は、<code class="highlighter-rouge">array</code>を使用します。フィードが 1 つのオブジェクトとして構成されている場合は、<code class="highlighter-rouge">single</code>を使用します。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">query</code></p>
          </td>
<td>
            <p>メディアフィードから categories を返すために使用されるクエリ。クエリの構文はフィードの構造によって異なります。<strong>categories</strong> を取得するには、適切なクエリを作成する必要があります。JSONフィードの場合は、クエリ構文に<a href="https://github.com/jayway/JsonPath">Jayway JsonPath構文</a>を使用します。XMLフィードの場合は、<a href="http://www.w3schools.com/xsl/xpath_syntax.asp">XPath式</a>を使用します。詳細については、「<a href="#queryparameter">queryパラメータ</a>」を参照してください。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">queryResultType</code></p>
          </td>
<td>
            <p>(<code class="highlighter-rouge">query</code>パラメータで指定された) クエリの結果で文字列のリストが返された場合は、この<code class="highlighter-rouge">queryResultType</code>パラメータを追加して<code class="highlighter-rouge">[]$</code>に設定します。クエリの結果がオブジェクト (マップ) の場合は、このパラメータを省略してください(Fire App Builderは、JavaのHashMapにオブジェクトをプッシュする必要があるため、結果のタイプを認識する必要があります)。</p>
          </td>
</tr>
    
<tr>
<td>
            <p><code class="highlighter-rouge">matchList</code></p>
          </td>
<td>
            <p><code class="highlighter-rouge">query</code>パラメータで定義されたクエリによって結果が返されます。この結果では、フィードの名前が、Fire App Builderがコンテンツモデルで使用する名前にマップされている必要があります。<code class="highlighter-rouge">matchList</code>パラメータは、クエリの結果をFire App Builderのメディアカテゴリ用の名前にマップするためのパラメータです。詳細については、「<a href="#matchlistparameter">matchListパラメータ</a>」を参照してください。</p>
          </td>
</tr>
<tr>
<td>
            <p><code class="highlighter-rouge">keyDataType</code> <br /></p>
          </td>
<td>
            <p>カテゴリに関連付けられるメディアオブジェクト。どのメディアをどのカテゴリにグループ化するかを指定する必要があります。<code class="highlighter-rouge">matchList</code>と同様、ターゲットとするアイテムの後に<code class="highlighter-rouge">@</code>と<code class="highlighter-rouge">keyDataPath</code>を付加して指定することで、メディアオブジェクトをカテゴリにマップし、識別します。例: <code class="highlighter-rouge">StringKey@keyDataPath</code>。詳細については、「<a href="#keydatatypeparameter">keyDataTypeパラメータ</a>」を参照してください。</p>
          </td>
</tr>
</tbody>
</table>
  </li>
</ol>

<h3 id="queryパラメータqueryparameter">queryパラメータ{#queryparameter}</h3>

<p>使用する構文は、JSONとXMLで異なります。実際のフィードに該当するセクションを参照してください。</p>

<ul>
  <li><a href="#categoryjson">JSONフィード</a></li>
  <li><a href="#categoryxml">XMLフィード</a></li>
</ul>

<h4 id="categoryjson">JSONフィード</h4>

<p>Fire App Builderのサンプルアプリでは、JSON形式を使用する汎用のLightCastメディアフィードから読み取りを行います。カテゴリレシピでは、<code class="highlighter-rouge">query</code>パラメータの<code class="highlighter-rouge">$..categories[*]</code> という値を使用して、フィードからカテゴリのリストを返します。これは、<a href="https://github.com/jayway/JsonPath">Jayway JsonPath</a>構文です。この構文の意味を次に示します。</p>

<table>
  <thead>
    <tr>
      <th>クエリ構文</th>
      <th>照合する対象</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code class="highlighter-rouge">$</code></td>
      <td>検索の開始位置としてルートディレクトリを指定します。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">..</code></td>
      <td>ルートのすべてのディレクトリとサブディレクトリを対象に再帰検索を行うことを指定します。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">categories[]</code></td>
      <td>“categories” という名前の配列を検索することを指定します。</td>
    </tr>
    <tr>
      <td><code class="highlighter-rouge">*</code></td>
      <td>すべての内容に一致します (ワイルドカード)。</td>
    </tr>
  </tbody>
</table>

<p>これらをまとめると、<code class="highlighter-rouge">$..categories[*]</code> になります。ルート (<code class="highlighter-rouge">$</code>) で開始し、すべてのディレクトリとサブディレクトリを再帰的に検索し (<code class="highlighter-rouge">..</code>)、<code class="highlighter-rouge">categories</code>という名前の配列 (内容は任意 (<code class="highlighter-rouge">*</code>)) に一致します。</p>

<p>クエリは、<a href="http://jsonpath.herokuapp.com/">Jayway JsonPath Evaluator</a>を使用してテストできます。</p>

<p>Fire App Builderのサンプルアプリで、このクエリ (<code class="highlighter-rouge">$..categories[*]</code>) を<a href="http://www.lightcast.com/api/firetv/channels.php?app_id=263&amp;app_key=4rghy65dcsqa&amp;action=channels_videos">LightCastフィードURL</a>のいずれかに対して実行すると、次に示すように、カテゴリ名が文字列として返されます。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>[
   "Jamaican Attractions",
   "The Country Jamaica",
   "Jamaican Attractions",
   "The Country Jamaica",
   "The Country Jamaica",
   "The Country Jamaica",
   "Jamaican Attractions",
   "The Country Jamaica",
   "Jamaican Attractions",
   "The Country Jamaica",
   "Jamaican Attractions",
   "Jamaican History",
   "The Country Jamaica",
   "Jamaican Attractions",
   "Jamaican History",
   "Jamaican History",
   "The Country Jamaica",
   "Jamaican Attractions",
   "Jamaican History",
   "The Country Jamaica",
   "Jamaican Attractions",
   "Jamaican History",
   "Jamaican History",
   "Jamaican History",
   "The Country Jamaica",
   "Jamaican Wildlife",
   "Jamaican Attractions",
   "The Country Jamaica",
   "Jamaican Wildlife",
   "The Country Jamaica",
   "Jamaican Attractions",
   "Jamaican Wildlife",
   "Jamaican Attractions",
   "Jamaican Wildlife"
]
</code></pre>
</div>

<p>(Fire App Builderでは、クエリ結果から重複項目が削除されます。)</p>

<p>Fire App Builderは、オブジェクトの配列を取得してハッシュマップに変換し、Javaクラスで処理できるようにする必要があります。そのため、次のパラメータ (<code class="highlighter-rouge">queryResultType</code>) を使用して、文字列の配列をオブジェクトの配列に変換します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"queryResultType": "[]$",
</code></pre>
</div>

<p>Jayway JsonPathクエリの作成方法の詳細については、「<a href="fire-app-builder-querying-json.html">JSONでクエリを実行する</a>」を参照してください。また、Jayway JsonPath全般の詳細については、「<a href="https://github.com/jayway/JsonPath">Jayway JsonPath</a>」を参照してください。</p>

<h4 id="xmlフィードcategoryxml">XMLフィード{#categoryxml}</h4>

<p>フィードがXMLの場合は、Jayway JsonPathを使用する代わりに、<a href="http://www.w3schools.com/xsl/xpath_syntax.asp">XPath式</a>を使用して、フィードの各要素をターゲットに指定する必要があります。XPathでは、XML文書が “ノード” と呼ばれるさまざまなアイテムを用いた構造に変換されます。XPath構文は各ノードの位置を指定するための構文です。</p>

<p>XMLフィードに次のような構造が含まれているとします。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;rss&gt;</span>
    <span class="nt">&lt;channel&gt;</span>
        <span class="nt">&lt;item&gt;</span>
        <span class="nt">&lt;title&gt;</span>Sample Title<span class="nt">&lt;/title&gt;</span>
        <span class="nt">&lt;pubDate&gt;</span>Wed, 26 Oct 2016 20:34:22 PDT<span class="nt">&lt;/pubDate&gt;</span>
        <span class="nt">&lt;link&gt;</span>https://example.com/myshow/episodes/110<span class="nt">&lt;/link&gt;</span>
        <span class="nt">&lt;author&gt;</span>Sample Author name<span class="nt">&lt;/author&gt;</span>
        <span class="nt">&lt;category&gt;</span>Technology<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;category&gt;</span>Gadgets<span class="nt">&lt;/category&gt;</span>
        <span class="nt">&lt;/item&gt;</span>
    <span class="nt">&lt;/channel&gt;</span>
<span class="nt">&lt;/rss&gt;</span>
</code></pre>
</div>

<p>このXMLフィードのカテゴリを取得するためのXPath式の例は次のようになります。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>//category/text()
</code></pre>
</div>

<p><code class="highlighter-rouge">//</code>はすべてのノードを再帰的に検索して一致がないかを調べます。これにより、ノードが階層内のどこであっても検索できます。<code class="highlighter-rouge">category</code>でカテゴリノードを指定し、<code class="highlighter-rouge">text()</code>でそのノードのテキストを指定します。</p>

<p>これをテストするには、<a href="http://www.freeformatter.com/xpath-tester.html">XPath Tester/Evaluator</a>を使用します。式からの応答は、次のようになります。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Text='Technology'
Text='Gadgets'
</code></pre>
</div>

<p>(<code class="highlighter-rouge">Text=</code>の部分は無視してください。これは単にXPath Tester/Evaluatorの表示の一部で、クエリで一致した内容ではありません。)</p>

<p>iTunesフィードの場合は、フィードの一般カテゴリ (<code class="highlighter-rouge">&lt;itunes:category text="Technology"&gt;</code>など) と、各アイテムのカテゴリ (<code class="highlighter-rouge">&lt;category&gt;Technology&lt;/category&gt;</code>) があることに注意してください。レシピのカテゴリをターゲットにする際は、フィードの一般カテゴリではなく、フィード内の各アイテムのカテゴリを指定する必要があります。</p>

<p>XMLフィードを<a href="http://www.freeformatter.com/xpath-tester.html">XPath Tester/Evaluator</a>にコピーし、同じ構文を使用してカテゴリを選択してみてください。</p>

<p>各種XPath式を示す他の例については、「<a href="fire-app-builder-querying-xml.html">XMLでクエリを実行する</a>」を参照してください。また、XPath式の全般的な情報については、「<a href="http://www.w3schools.com/xsl/xpath_syntax.asp">XPath syntax</a>」と「<a href="http://www.freeformatter.com/xpath-tester.html#xpath-examples">XPath Examples</a>」の例のセクションを参照してください。</p>

<div class="alert alert-info" role="alert"><i class="fa fa-info-circle"></i> <b>Note:</b> フィードの個々のアイテムが複数のカテゴリに関連付けられている場合、アプリの表示では、関連付けられているそれぞれのカテゴリにアイテムが表示されます。たとえば、Cool VideoがTechnologyとGadgetsの両方のカテゴリにある場合、このビデオはアプリ内で 2 か所に表示されます。</div>

<h3 id="matchlistparameter">matchListパラメータ</h3>

<p><code class="highlighter-rouge">matchList</code>パラメータの目的は、カテゴリクエリの結果から特定のプロパティを選択して、Fire App Builderコンテンツモデルにマップすることです。</p>

<p><code class="highlighter-rouge">matchList</code>で使用される構文は、Jayway JsonPath式やXPath式ではなく、クエリ結果内の特定の要素をターゲットにするカスタムのFire App Builder構文です(そのため、JSONとXMLの手順は、同じセクションに集約されています)。</p>

<p>Fire App Builderのサンプルアプリでは、カテゴリレシピの値は<code class="highlighter-rouge">StringKey@name</code>です。</p>

<p>この構文の構成は次のとおりです。アンパサンド (<code class="highlighter-rouge">@</code>) の左側に、クエリの結果でターゲットにするプロパティを設定します (<code class="highlighter-rouge">StringKey</code>は文字列のリストを選択します)。アンパサンド (<code class="highlighter-rouge">@</code>) の右側には、プロパティのマップ先となるFire App Builder要素を設定します (<code class="highlighter-rouge">name</code>)。</p>

<p><strong>カテゴリレシピ</strong>の場合は、<code class="highlighter-rouge">matchList</code>パラメータでフィードのカテゴリを<code class="highlighter-rouge">name</code>にマップする必要があります。</p>

<p>Fire App Builderのサンプルアプリでは、クエリの結果が文字列のリストであるため、<code class="highlighter-rouge">StringKey</code>を使用して文字列を照合します。ただし、クエリの結果セットに次のようなJSONオブジェクトが含まれている場合:</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"list"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="nt">"title"</span><span class="w"> </span><span class="p">:</span><span class="w"> </span><span class="s2">"My category title"</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p><code class="highlighter-rouge">My category title</code>に対して照合を行い、<code class="highlighter-rouge">name</code>に変換するには、次の値を使用します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>list/title@name
</code></pre>
</div>

<p>下位のオブジェクトに移動するには、スラッシュ (<code class="highlighter-rouge">/</code>) を使用します (XPathの場合と同様)。この場合、<code class="highlighter-rouge">title</code>は<code class="highlighter-rouge">list</code>の 1 つ下のオブジェクトで、<code class="highlighter-rouge">list</code>はルートの 1 つ下のオブジェクトです。これらの 2 つのレベルで照合した後、その結果がカテゴリ名になります。</p>

<p>XML要素を照合する場合も、同様の方法を使用します。結果が文字列のリストであると想定します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>Text='Technology'
Text='Gadgets'
</code></pre>
</div>

<p>テキストコンテンツを照合して、Fire App Builder UIのカテゴリ要素にマップするには、次の構文を使用します。</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code>StringKey@name
</code></pre>
</div>

<p>クエリ結果が次のような場合:</p>

<div class="language-xml highlighter-rouge"><pre class="highlight"><code><span class="nt">&lt;list&gt;</span>
<span class="nt">&lt;title&gt;</span>My category title<span class="nt">&lt;/title&gt;</span>
<span class="nt">&lt;/list&gt;</span>
</code></pre>
</div>

<p>カテゴリタイトルを次のようにマップします。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>/list/title@name
</code></pre>
</div>

<p>スラッシュ (<code class="highlighter-rouge">/</code>) は 1 レベル下のXMLノードを意味します。</p>

<h3 id="keydatatypeparameter">keyDataTypeパラメータ</h3>

<p>選択したカテゴリでグループ化するメディアアイテムをFire App Builderに伝える必要があります。<code class="highlighter-rouge">keyDataType</code>パラメータは、カテゴリに関連付けられたメディアアイテムを示すためのパラメータです。このパラメータは、カテゴリレシピで使用され、その後コンテンツレシピの変数に渡されます。</p>

<p>Fire App Builderのクエリの結果は文字列のリストです。そのため、<code class="highlighter-rouge">StringKey@keyDataPath</code>を使用してメディアアイテムをターゲットにし、カテゴリに関連付けます。自分でクエリを実行した結果も文字列のリストである場合は、デフォルト値を使用します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>"keyDataType": "StringKey@keyDataPath"
</code></pre>
</div>

<p>しかし、次のように、メディアオブジェクトが<code class="highlighter-rouge">assets</code>ノード内でリストになっており、<code class="highlighter-rouge">assets</code>ノードが<code class="highlighter-rouge">container</code>ノード内で入れ子になっている場合、</p>

<div class="language-json highlighter-rouge"><pre class="highlight"><code><span class="s2">"container"</span><span class="err">:</span><span class="w"> </span><span class="p">{</span><span class="w">
    </span><span class="nt">"assets"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
    </span><span class="s2">"5825652561001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"5825652558001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"5825652569001"</span><span class="p">,</span><span class="w">
    </span><span class="s2">"5873045223001"</span><span class="p">,</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre>
</div>

<p>メディアオブジェクトを取得するには、次のようなクエリを作成します。</p>

<div class="highlighter-rouge"><pre class="highlight"><code>container/assets@keyDataPath
</code></pre>
</div>

<p><code class="highlighter-rouge">matchList</code>パラメータと同様、<code class="highlighter-rouge">keyDataType</code>クエリでもJayway JsonPath構文は使用しません。代わりに、ノード名の後に <code class="highlighter-rouge">/</code> を付けて次のレベルに移動し、各ノードを照合します。<code class="highlighter-rouge">container/assets</code>では、このレベルのすべてのアイテムが照合されます。</p>

<p>アンパサンド<code class="highlighter-rouge">@</code>の右側にある<code class="highlighter-rouge">keyDataPath</code>キーは、Fire App Builderでこれらのメディアオブジェクトを保存および使用する方法を示しています。<code class="highlighter-rouge">@keyDataPath</code>を使用することで、アイテムをFire App Builderコンテンツモデルと一致させることができます。</p>

<h2 id="カテゴリを持たないフィード">カテゴリを持たないフィード</h2>

<p>フィード内にカテゴリがなく、カテゴリごとに個別のフィードを用意している場合は、Navigator.jsonの構成時にカテゴリ名をハードコーディングできます。これにより、各フィード内のすべてのビデオが特定のカテゴリでグループ化されます。この方法の詳細については、「<a href="fire-app-builder-configure-navigator-open-feeds.html#hardcodingcategories">“Hardcoding Your Categories”</a>」を参照してください。</p>

<h2 id="次のステップ">次のステップ</h2>

<p>アプリのメディアフィードのカテゴリを構成できたところで、続いては、コンテンツを構成する必要があります。「<a href="fire-app-builder-set-up-recipes-content.html">コンテンツレシピをセットアップする</a>」を参照してください。</p>

<!-- common links -->


                    <div class="toc-main-column">
                        

                    </div>

            </div>
        </div><!--/.container-->


    </div><!--/.page-container-->
    
    <div class="footertop">
    <div class="container">
        <div class="col-md-6">
            <p></p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
                <!--<li><a href="http://developer.amazon.com" class="noCrossRef productSubtitle"> Home</a> </li><li> <a href="index.html" class="noCrossRef productSubtitle"> Documentation</a></li><li>Fire App Builder</li>-->
        </div>
    </div>
</div>

<footer>
    <div class="container">
        <div class="row">
            <div class="col-md-4 col-sm-6 footerleft ">
                <div class="logofooter"> About the Developer Portal</div>
                <p>The Amazon Developer Portal provides documentation for developers creating apps for the Amazon
                    appstore, including Alexa skills. Apps include streaming media apps, game apps, and more. </p>
                <p><i class="fa fa-map-pin"></i> 1120 Enterprise Way, Sunnyvale, California</p>
                <p><i class="fa fa-envelope"></i> E-mail : someemail@amazon.com</p>

            </div>
            <div class="col-md-2 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Links</h6>
                <ul class="footer-ul">
                    <li><a href="#"> Doc index</a></li>
                    <li><a href="#"> Blog</a></li>
                    <li><a href="#"> Developer.amazon.com</a></li>
                    <li><a href="#"> AWS docs</a></li>
                    <li><a href="#"> Amazon Appstore</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Amazon News</h6>
                <ul class="footer-ul">
                    <li><a href="#">Developer.amazon.com blog</a></li>
                    <li><a href="#">AWS blog</a></li>
                    <li><a href="#">Amazon newsroom</a></li>
                    <li><a href="#">Other Amazon blogs</a></li>
                </ul>
            </div>

            <div class="col-md-3 col-sm-6 paddingtop-bottom">
                <h6 class="heading7">Forums</h6>
                <ul class="footer-ul">
                    <li><a href="#">Amazon Underground</a></li>
                    <li><a href="#">General Android</a></li>
                    <li><a href="#">Amazon Dash Replenishment</a></li>
                    <li><a href="#">Merch by Amazon</a></li>
                    <li><a href="#">Alexa</a></li>
                    <li><a href="#">Amazon Fire Devices</a></li>
                    <li><a href="#">Appstore</a></li>
                    <li><a href="#">Mobile APIs and Services</a></li>
                </ul>
            </div>
        </div>
    </div>
    </div>
</footer>
<!--subfooter start from here -->

<div class="copyright">
    <div class="container">
        <div class="col-md-6">
            <p>© 2017 -  Amazon</p>
        </div>
        <div class="col-md-6">
            <ul class="bottom_ul">
                <li><a href="#">About us</a></li>
                <li><a href="#">Blog</a></li>
                <li><a href="#">Faq's</a></li>
                <li><a href="#">Contact us</a></li>
                <li><a href="#">Site Map</a></li>
            </ul>
        </div>
    </div>
</div>

    
    <!--scripts loaded here-->





</body>

</html>
